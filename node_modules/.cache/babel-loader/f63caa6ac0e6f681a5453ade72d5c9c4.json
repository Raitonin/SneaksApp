{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultHandler = void 0;\n\nconst p_cancelable_1 = require(\"p-cancelable\");\n\nconst is_1 = require(\"@sindresorhus/is\");\n\nconst as_promise_1 = require(\"./as-promise\");\n\nconst create_rejection_1 = require(\"./as-promise/create-rejection\");\n\nconst core_1 = require(\"./core\");\n\nconst deep_freeze_1 = require(\"./utils/deep-freeze\");\n\nconst errors = {\n  RequestError: as_promise_1.RequestError,\n  CacheError: as_promise_1.CacheError,\n  ReadError: as_promise_1.ReadError,\n  HTTPError: as_promise_1.HTTPError,\n  MaxRedirectsError: as_promise_1.MaxRedirectsError,\n  TimeoutError: as_promise_1.TimeoutError,\n  ParseError: as_promise_1.ParseError,\n  CancelError: p_cancelable_1.CancelError,\n  UnsupportedProtocolError: as_promise_1.UnsupportedProtocolError,\n  UploadError: as_promise_1.UploadError\n}; // The `delay` package weighs 10KB (!)\n\nconst delay = async ms => new Promise(resolve => setTimeout(resolve, ms));\n\nconst {\n  normalizeArguments,\n  mergeOptions\n} = as_promise_1.PromisableRequest;\n\nconst getPromiseOrStream = options => options.isStream ? new core_1.default(options.url, options) : as_promise_1.default(options);\n\nconst isGotInstance = value => 'defaults' in value && 'options' in value.defaults;\n\nconst aliases = ['get', 'post', 'put', 'patch', 'head', 'delete'];\n\nexports.defaultHandler = (options, next) => next(options);\n\nconst callInitHooks = (hooks, options) => {\n  if (hooks) {\n    for (const hook of hooks) {\n      hook(options);\n    }\n  }\n};\n\nconst create = defaults => {\n  // Proxy properties from next handlers\n  defaults._rawHandlers = defaults.handlers;\n  defaults.handlers = defaults.handlers.map(fn => (options, next) => {\n    // This will be assigned by assigning result\n    let root;\n    const result = fn(options, newOptions => {\n      root = next(newOptions);\n      return root;\n    });\n\n    if (result !== root && !options.isStream && root) {\n      const typedResult = result;\n      const {\n        then: promiseThen,\n        catch: promiseCatch,\n        finally: promiseFianlly\n      } = typedResult;\n      Object.setPrototypeOf(typedResult, Object.getPrototypeOf(root));\n      Object.defineProperties(typedResult, Object.getOwnPropertyDescriptors(root)); // These should point to the new promise\n      // eslint-disable-next-line promise/prefer-await-to-then\n\n      typedResult.then = promiseThen;\n      typedResult.catch = promiseCatch;\n      typedResult.finally = promiseFianlly;\n    }\n\n    return result;\n  }); // Got interface\n\n  const got = (url, options) => {\n    var _a, _b;\n\n    let iteration = 0;\n\n    const iterateHandlers = newOptions => {\n      return defaults.handlers[iteration++](newOptions, iteration === defaults.handlers.length ? getPromiseOrStream : iterateHandlers);\n    }; // TODO: Remove this in Got 12.\n\n\n    if (is_1.default.plainObject(url)) {\n      const mergedOptions = { ...url,\n        ...options\n      };\n      core_1.setNonEnumerableProperties([url, options], mergedOptions);\n      options = mergedOptions;\n      url = undefined;\n    }\n\n    try {\n      // Call `init` hooks\n      let initHookError;\n\n      try {\n        callInitHooks(defaults.options.hooks.init, options);\n        callInitHooks((_a = options === null || options === void 0 ? void 0 : options.hooks) === null || _a === void 0 ? void 0 : _a.init, options);\n      } catch (error) {\n        initHookError = error;\n      } // Normalize options & call handlers\n\n\n      const normalizedOptions = normalizeArguments(url, options, defaults.options);\n      normalizedOptions[core_1.kIsNormalizedAlready] = true;\n\n      if (initHookError) {\n        throw new as_promise_1.RequestError(initHookError.message, initHookError, normalizedOptions);\n      }\n\n      return iterateHandlers(normalizedOptions);\n    } catch (error) {\n      if (options === null || options === void 0 ? void 0 : options.isStream) {\n        throw error;\n      } else {\n        return create_rejection_1.default(error, defaults.options.hooks.beforeError, (_b = options === null || options === void 0 ? void 0 : options.hooks) === null || _b === void 0 ? void 0 : _b.beforeError);\n      }\n    }\n  };\n\n  got.extend = (...instancesOrOptions) => {\n    const optionsArray = [defaults.options];\n    let handlers = [...defaults._rawHandlers];\n    let isMutableDefaults;\n\n    for (const value of instancesOrOptions) {\n      if (isGotInstance(value)) {\n        optionsArray.push(value.defaults.options);\n        handlers.push(...value.defaults._rawHandlers);\n        isMutableDefaults = value.defaults.mutableDefaults;\n      } else {\n        optionsArray.push(value);\n\n        if ('handlers' in value) {\n          handlers.push(...value.handlers);\n        }\n\n        isMutableDefaults = value.mutableDefaults;\n      }\n    }\n\n    handlers = handlers.filter(handler => handler !== exports.defaultHandler);\n\n    if (handlers.length === 0) {\n      handlers.push(exports.defaultHandler);\n    }\n\n    return create({\n      options: mergeOptions(...optionsArray),\n      handlers,\n      mutableDefaults: Boolean(isMutableDefaults)\n    });\n  }; // Pagination\n\n\n  const paginateEach = async function* (url, options) {\n    // TODO: Remove this `@ts-expect-error` when upgrading to TypeScript 4.\n    // Error: Argument of type 'Merge<Options, PaginationOptions<T, R>> | undefined' is not assignable to parameter of type 'Options | undefined'.\n    // @ts-expect-error\n    let normalizedOptions = normalizeArguments(url, options, defaults.options);\n    normalizedOptions.resolveBodyOnly = false;\n    const pagination = normalizedOptions.pagination;\n\n    if (!is_1.default.object(pagination)) {\n      throw new TypeError('`options.pagination` must be implemented');\n    }\n\n    const all = [];\n    let {\n      countLimit\n    } = pagination;\n    let numberOfRequests = 0;\n\n    while (numberOfRequests < pagination.requestLimit) {\n      if (numberOfRequests !== 0) {\n        // eslint-disable-next-line no-await-in-loop\n        await delay(pagination.backoff);\n      } // TODO: Throw when result is not an instance of Response\n      // eslint-disable-next-line no-await-in-loop\n\n\n      const result = await got(normalizedOptions); // eslint-disable-next-line no-await-in-loop\n\n      const parsed = await pagination.transform(result);\n      const current = [];\n\n      for (const item of parsed) {\n        if (pagination.filter(item, all, current)) {\n          if (!pagination.shouldContinue(item, all, current)) {\n            return;\n          }\n\n          yield item;\n\n          if (pagination.stackAllItems) {\n            all.push(item);\n          }\n\n          current.push(item);\n\n          if (--countLimit <= 0) {\n            return;\n          }\n        }\n      }\n\n      const optionsToMerge = pagination.paginate(result, all, current);\n\n      if (optionsToMerge === false) {\n        return;\n      }\n\n      if (optionsToMerge === result.request.options) {\n        normalizedOptions = result.request.options;\n      } else if (optionsToMerge !== undefined) {\n        normalizedOptions = normalizeArguments(undefined, optionsToMerge, normalizedOptions);\n      }\n\n      numberOfRequests++;\n    }\n  };\n\n  got.paginate = (url, options) => {\n    return paginateEach(url, options);\n  };\n\n  got.paginate.all = async (url, options) => {\n    const results = [];\n\n    for await (const item of got.paginate(url, options)) {\n      results.push(item);\n    }\n\n    return results;\n  }; // For those who like very descriptive names\n\n\n  got.paginate.each = paginateEach; // Stream API\n\n  got.stream = (url, options) => got(url, { ...options,\n    isStream: true\n  }); // Shortcuts\n\n\n  for (const method of aliases) {\n    got[method] = (url, options) => got(url, { ...options,\n      method\n    });\n\n    got.stream[method] = (url, options) => {\n      return got(url, { ...options,\n        method,\n        isStream: true\n      });\n    };\n  }\n\n  Object.assign(got, { ...errors,\n    mergeOptions\n  });\n  Object.defineProperty(got, 'defaults', {\n    value: defaults.mutableDefaults ? defaults : deep_freeze_1.default(defaults),\n    writable: defaults.mutableDefaults,\n    configurable: defaults.mutableDefaults,\n    enumerable: true\n  });\n  return got;\n};\n\nexports.default = create;\n\n__exportStar(require(\"./types\"), exports);","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/got/dist/source/create.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","hasOwnProperty","value","defaultHandler","p_cancelable_1","require","is_1","as_promise_1","create_rejection_1","core_1","deep_freeze_1","errors","RequestError","CacheError","ReadError","HTTPError","MaxRedirectsError","TimeoutError","ParseError","CancelError","UnsupportedProtocolError","UploadError","delay","ms","Promise","resolve","setTimeout","normalizeArguments","mergeOptions","PromisableRequest","getPromiseOrStream","options","isStream","default","url","isGotInstance","defaults","aliases","next","callInitHooks","hooks","hook","_rawHandlers","handlers","map","fn","root","result","newOptions","typedResult","then","promiseThen","catch","promiseCatch","finally","promiseFianlly","setPrototypeOf","getPrototypeOf","defineProperties","getOwnPropertyDescriptors","got","_a","_b","iteration","iterateHandlers","length","plainObject","mergedOptions","setNonEnumerableProperties","initHookError","init","error","normalizedOptions","kIsNormalizedAlready","message","beforeError","extend","instancesOrOptions","optionsArray","isMutableDefaults","push","mutableDefaults","filter","handler","Boolean","paginateEach","resolveBodyOnly","pagination","object","TypeError","all","countLimit","numberOfRequests","requestLimit","backoff","parsed","transform","current","item","shouldContinue","stackAllItems","optionsToMerge","paginate","request","results","each","stream","method","assign","writable","configurable"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultHandler = void 0;\nconst p_cancelable_1 = require(\"p-cancelable\");\nconst is_1 = require(\"@sindresorhus/is\");\nconst as_promise_1 = require(\"./as-promise\");\nconst create_rejection_1 = require(\"./as-promise/create-rejection\");\nconst core_1 = require(\"./core\");\nconst deep_freeze_1 = require(\"./utils/deep-freeze\");\nconst errors = {\n    RequestError: as_promise_1.RequestError,\n    CacheError: as_promise_1.CacheError,\n    ReadError: as_promise_1.ReadError,\n    HTTPError: as_promise_1.HTTPError,\n    MaxRedirectsError: as_promise_1.MaxRedirectsError,\n    TimeoutError: as_promise_1.TimeoutError,\n    ParseError: as_promise_1.ParseError,\n    CancelError: p_cancelable_1.CancelError,\n    UnsupportedProtocolError: as_promise_1.UnsupportedProtocolError,\n    UploadError: as_promise_1.UploadError\n};\n// The `delay` package weighs 10KB (!)\nconst delay = async (ms) => new Promise(resolve => setTimeout(resolve, ms));\nconst { normalizeArguments, mergeOptions } = as_promise_1.PromisableRequest;\nconst getPromiseOrStream = (options) => options.isStream ? new core_1.default(options.url, options) : as_promise_1.default(options);\nconst isGotInstance = (value) => ('defaults' in value && 'options' in value.defaults);\nconst aliases = [\n    'get',\n    'post',\n    'put',\n    'patch',\n    'head',\n    'delete'\n];\nexports.defaultHandler = (options, next) => next(options);\nconst callInitHooks = (hooks, options) => {\n    if (hooks) {\n        for (const hook of hooks) {\n            hook(options);\n        }\n    }\n};\nconst create = (defaults) => {\n    // Proxy properties from next handlers\n    defaults._rawHandlers = defaults.handlers;\n    defaults.handlers = defaults.handlers.map(fn => ((options, next) => {\n        // This will be assigned by assigning result\n        let root;\n        const result = fn(options, newOptions => {\n            root = next(newOptions);\n            return root;\n        });\n        if (result !== root && !options.isStream && root) {\n            const typedResult = result;\n            const { then: promiseThen, catch: promiseCatch, finally: promiseFianlly } = typedResult;\n            Object.setPrototypeOf(typedResult, Object.getPrototypeOf(root));\n            Object.defineProperties(typedResult, Object.getOwnPropertyDescriptors(root));\n            // These should point to the new promise\n            // eslint-disable-next-line promise/prefer-await-to-then\n            typedResult.then = promiseThen;\n            typedResult.catch = promiseCatch;\n            typedResult.finally = promiseFianlly;\n        }\n        return result;\n    }));\n    // Got interface\n    const got = ((url, options) => {\n        var _a, _b;\n        let iteration = 0;\n        const iterateHandlers = (newOptions) => {\n            return defaults.handlers[iteration++](newOptions, iteration === defaults.handlers.length ? getPromiseOrStream : iterateHandlers);\n        };\n        // TODO: Remove this in Got 12.\n        if (is_1.default.plainObject(url)) {\n            const mergedOptions = {\n                ...url,\n                ...options\n            };\n            core_1.setNonEnumerableProperties([url, options], mergedOptions);\n            options = mergedOptions;\n            url = undefined;\n        }\n        try {\n            // Call `init` hooks\n            let initHookError;\n            try {\n                callInitHooks(defaults.options.hooks.init, options);\n                callInitHooks((_a = options === null || options === void 0 ? void 0 : options.hooks) === null || _a === void 0 ? void 0 : _a.init, options);\n            }\n            catch (error) {\n                initHookError = error;\n            }\n            // Normalize options & call handlers\n            const normalizedOptions = normalizeArguments(url, options, defaults.options);\n            normalizedOptions[core_1.kIsNormalizedAlready] = true;\n            if (initHookError) {\n                throw new as_promise_1.RequestError(initHookError.message, initHookError, normalizedOptions);\n            }\n            return iterateHandlers(normalizedOptions);\n        }\n        catch (error) {\n            if (options === null || options === void 0 ? void 0 : options.isStream) {\n                throw error;\n            }\n            else {\n                return create_rejection_1.default(error, defaults.options.hooks.beforeError, (_b = options === null || options === void 0 ? void 0 : options.hooks) === null || _b === void 0 ? void 0 : _b.beforeError);\n            }\n        }\n    });\n    got.extend = (...instancesOrOptions) => {\n        const optionsArray = [defaults.options];\n        let handlers = [...defaults._rawHandlers];\n        let isMutableDefaults;\n        for (const value of instancesOrOptions) {\n            if (isGotInstance(value)) {\n                optionsArray.push(value.defaults.options);\n                handlers.push(...value.defaults._rawHandlers);\n                isMutableDefaults = value.defaults.mutableDefaults;\n            }\n            else {\n                optionsArray.push(value);\n                if ('handlers' in value) {\n                    handlers.push(...value.handlers);\n                }\n                isMutableDefaults = value.mutableDefaults;\n            }\n        }\n        handlers = handlers.filter(handler => handler !== exports.defaultHandler);\n        if (handlers.length === 0) {\n            handlers.push(exports.defaultHandler);\n        }\n        return create({\n            options: mergeOptions(...optionsArray),\n            handlers,\n            mutableDefaults: Boolean(isMutableDefaults)\n        });\n    };\n    // Pagination\n    const paginateEach = (async function* (url, options) {\n        // TODO: Remove this `@ts-expect-error` when upgrading to TypeScript 4.\n        // Error: Argument of type 'Merge<Options, PaginationOptions<T, R>> | undefined' is not assignable to parameter of type 'Options | undefined'.\n        // @ts-expect-error\n        let normalizedOptions = normalizeArguments(url, options, defaults.options);\n        normalizedOptions.resolveBodyOnly = false;\n        const pagination = normalizedOptions.pagination;\n        if (!is_1.default.object(pagination)) {\n            throw new TypeError('`options.pagination` must be implemented');\n        }\n        const all = [];\n        let { countLimit } = pagination;\n        let numberOfRequests = 0;\n        while (numberOfRequests < pagination.requestLimit) {\n            if (numberOfRequests !== 0) {\n                // eslint-disable-next-line no-await-in-loop\n                await delay(pagination.backoff);\n            }\n            // TODO: Throw when result is not an instance of Response\n            // eslint-disable-next-line no-await-in-loop\n            const result = (await got(normalizedOptions));\n            // eslint-disable-next-line no-await-in-loop\n            const parsed = await pagination.transform(result);\n            const current = [];\n            for (const item of parsed) {\n                if (pagination.filter(item, all, current)) {\n                    if (!pagination.shouldContinue(item, all, current)) {\n                        return;\n                    }\n                    yield item;\n                    if (pagination.stackAllItems) {\n                        all.push(item);\n                    }\n                    current.push(item);\n                    if (--countLimit <= 0) {\n                        return;\n                    }\n                }\n            }\n            const optionsToMerge = pagination.paginate(result, all, current);\n            if (optionsToMerge === false) {\n                return;\n            }\n            if (optionsToMerge === result.request.options) {\n                normalizedOptions = result.request.options;\n            }\n            else if (optionsToMerge !== undefined) {\n                normalizedOptions = normalizeArguments(undefined, optionsToMerge, normalizedOptions);\n            }\n            numberOfRequests++;\n        }\n    });\n    got.paginate = ((url, options) => {\n        return paginateEach(url, options);\n    });\n    got.paginate.all = (async (url, options) => {\n        const results = [];\n        for await (const item of got.paginate(url, options)) {\n            results.push(item);\n        }\n        return results;\n    });\n    // For those who like very descriptive names\n    got.paginate.each = paginateEach;\n    // Stream API\n    got.stream = ((url, options) => got(url, { ...options, isStream: true }));\n    // Shortcuts\n    for (const method of aliases) {\n        got[method] = ((url, options) => got(url, { ...options, method }));\n        got.stream[method] = ((url, options) => {\n            return got(url, { ...options, method, isStream: true });\n        });\n    }\n    Object.assign(got, { ...errors, mergeOptions });\n    Object.defineProperty(got, 'defaults', {\n        value: defaults.mutableDefaults ? defaults : deep_freeze_1.default(defaults),\n        writable: defaults.mutableDefaults,\n        configurable: defaults.mutableDefaults,\n        enumerable: true\n    });\n    return got;\n};\nexports.default = create;\n__exportStar(require(\"./types\"), exports);\n"]},"metadata":{},"sourceType":"script"}