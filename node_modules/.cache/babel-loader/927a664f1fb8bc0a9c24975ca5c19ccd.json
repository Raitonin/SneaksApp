{"ast":null,"code":"const request = require('request');\n\nconst axios = require('axios');\n\nmodule.exports = {\n  getLink: async function (shoe, callback) {\n    var options = {\n      url: \"https://2fwotdvm2o-dsn.algolia.net/1/indexes/*/queries?x-algolia-agent=Algolia%20for%20vanilla%20JavaScript%20(lite)%203.32.0%3Breact-instantsearch%205.4.0%3BJS%20Helper%202.26.1&x-algolia-application-id=2FWOTDVM2O&x-algolia-api-key=ac96de6fef0e02bb95d433d8d5c7038a\",\n      body: \"{\\\"requests\\\":[{\\\"indexName\\\":\\\"product_variants_v2_flight_club\\\",\\\"params\\\":\\\"query=\" + shoe.styleID + \"&hitsPerPage=1&maxValuesPerFacet=1&filters=&facets=%5B%22lowest_price_cents_usd%22%5D&tagFilters=\\\"}]}\",\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.4 Safari/605.1.15-API'\n      }\n    };\n    request.post(options, function (error, response, data) {\n      if (error) {\n        let err = new Error(\"Could not connect to Flight Club while searching '\" + shoe.styleID + \"' Error: \", error);\n        console.log(err);\n        callback(err);\n      } else if (response.statusCode != 200) {\n        let err = new Error(\"Could not connect to Flight Club while searching '\" + shoe.styleID + \"' -  Status Code: \", response.statusCode);\n        console.log(err);\n        callback(err);\n      } else {\n        var json = JSON.parse(data);\n\n        if (json.results[0].hits[0]) {\n          if (json.results[0].hits[0].lowest_price_cents_usd / 100 != 0) {\n            shoe.lowestResellPrice.flightClub = json.results[0].hits[0].lowest_price_cents_usd / 100;\n          }\n\n          shoe.resellLinks.flightClub = 'https://www.flightclub.com/' + json.results[0].hits[0].slug;\n          shoe.description = json.results[0].hits[0].story;\n        }\n\n        callback(shoe);\n      }\n    });\n  },\n  getPrices: function (shoe, callback) {\n    if (!shoe.resellLinks.flightClub) {\n      callback();\n    } else {\n      var options = {\n        url: 'https://www.flightclub.com/token',\n        headers: {\n          'User-Agent': 'Sneaks-API',\n          Cookie: '_ga=GA1.2.1305697265.1589650884; _gat_mpgaTracker1=1; _gid=GA1.2.110567219.1592159329; _xsrf=ACpmRhbR-o7gf2gOoZrduFroRkcMReIv0VaM; ab.storage.sessionId.bfd3619a-0e44-4389-b0e4-30cca9ba859f=%7B%22g%22%3A%2270eb2c6d-82af-5175-401c-05b1b17c008f%22%2C%22e%22%3A1592165414984%2C%22c%22%3A1592161566043%2C%22l%22%3A1592163614984%7D; __stripe_mid=23ecdd48-6f99-42e4-a01c-2a3b66ad8f85; __stripe_sid=86d74e96-4eb3-45b0-9ffa-1cbf7ced6deb; _pxde=cb6ac20c0c2d68d7343c4508da0f1aff46a46615056b68de3a61ed3c12945823:eyJ0aW1lc3RhbXAiOjE1OTIxNjM2MTQwMTYsImZfa2IiOjAsImlwY19pZCI6W119; _pxff_rf=1; _fbp=fb.1.1589652394965.825578106; _px=bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:C9OlEdqfQV85zrT3Ehf9ROYfc6Mgwurx6eS70cXnpXIunhz171ULOo4lCIn1qC3vYI643A0+zzTdn6+l1uk/HkjbCTXt3YXepmzx25LgsbiafOofD/M9gfdrWcVTOBTFAzHRdy3AfMFAZMbfjTLLExh7ELWFaXR5Y4AIFSpcoJ9EVy3pi7d8WfLt9ovEk7pSW+jecXGzeR+HDkB5qgTvct9goMe2nH1PyvCNUPxI9h2hENV3WmtkAmWSoSKdfPzmFdOuHZI/bHW7DqJ5KRolxg==; _px3=f9373bd44c36697e1917ffc8bedfebda19b91c675884b6c652b76ad4db11f2b3:bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:JEiKt5U/MzH2hwNkVdu3FcNxxwFWzE9KSdjiOmAKrcchHj9lOSLFukjBQk1imSgxzsQXK6+gcdDQJEOiQdH0xB+GhxplxjaXSJnqWRf72xhdXQDjEFepal/9virvQjrbbe8v/SZ0vqOREwdQpuZ1RaJJySCPaKau67Pv5YF636U=; _csrf=YB0s2Rxh9LAc6PgZIAM7vBo9; _pxvid=b164dfb6-979b-11ea-869f-0242ac12000b; __cfduid=da573444825c291236c950b508eb7a4741589650553; GSIDPE8xI3mBKqVw=d157f2f9-4c3c-4fcc-beee-6e5ff281eae2; optimizelyBuckets=%7B%7D; optimizelySegments=%7B%22985729904%22%3A%22safari%22%2C%22986786736%22%3A%22search%22%2C%22995297024%22%3A%22false%22%7D; 3060738.3440491=7452ec8e-d2bb-4b7f-bcbf-474676736c2a; tracker_device=bfe4ad7b-07db-401e-8b4a-a7739ff53d2d; optimizelyEndUserId=oeu1511627844219r0.6301887025421603'\n        }\n      };\n      let slug = shoe.resellLinks.flightClub.split('.com/')[1];\n      var token;\n      request(options, function getToken(error, response, data) {\n        if (error) {\n          let err = new Error(\"Could not connect to Flight Club while getting token - Error: \", error);\n          console.log(err);\n          callback(err);\n        } else if (response.statusCode != 200) {\n          let err = new Error(\"Could not connect to Flight Club while  getting token-  Status Code: \", response.statusCode);\n          console.log(err);\n          callback(err);\n        } else {\n          token = data;\n          let config = {\n            headers: {\n              'User-Agent': 'Test',\n              'Content-Type': 'application/json',\n              Cookie: '_ga=GA1.2.1305697265.1589650884; _gat_mpgaTracker1=1; _gid=GA1.2.110567219.1592159329; _xsrf=ACpmRhbR-o7gf2gOoZrduFroRkcMReIv0VaM; ab.storage.sessionId.bfd3619a-0e44-4389-b0e4-30cca9ba859f=%7B%22g%22%3A%2270eb2c6d-82af-5175-401c-05b1b17c008f%22%2C%22e%22%3A1592165414984%2C%22c%22%3A1592161566043%2C%22l%22%3A1592163614984%7D; __stripe_mid=23ecdd48-6f99-42e4-a01c-2a3b66ad8f85; __stripe_sid=86d74e96-4eb3-45b0-9ffa-1cbf7ced6deb; _pxde=cb6ac20c0c2d68d7343c4508da0f1aff46a46615056b68de3a61ed3c12945823:eyJ0aW1lc3RhbXAiOjE1OTIxNjM2MTQwMTYsImZfa2IiOjAsImlwY19pZCI6W119; _pxff_rf=1; _fbp=fb.1.1589652394965.825578106; _px=bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:C9OlEdqfQV85zrT3Ehf9ROYfc6Mgwurx6eS70cXnpXIunhz171ULOo4lCIn1qC3vYI643A0+zzTdn6+l1uk/HkjbCTXt3YXepmzx25LgsbiafOofD/M9gfdrWcVTOBTFAzHRdy3AfMFAZMbfjTLLExh7ELWFaXR5Y4AIFSpcoJ9EVy3pi7d8WfLt9ovEk7pSW+jecXGzeR+HDkB5qgTvct9goMe2nH1PyvCNUPxI9h2hENV3WmtkAmWSoSKdfPzmFdOuHZI/bHW7DqJ5KRolxg==; _px3=f9373bd44c36697e1917ffc8bedfebda19b91c675884b6c652b76ad4db11f2b3:bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:JEiKt5U/MzH2hwNkVdu3FcNxxwFWzE9KSdjiOmAKrcchHj9lOSLFukjBQk1imSgxzsQXK6+gcdDQJEOiQdH0xB+GhxplxjaXSJnqWRf72xhdXQDjEFepal/9virvQjrbbe8v/SZ0vqOREwdQpuZ1RaJJySCPaKau67Pv5YF636U=; _csrf=YB0s2Rxh9LAc6PgZIAM7vBo9; _pxvid=b164dfb6-979b-11ea-869f-0242ac12000b; __cfduid=da573444825c291236c950b508eb7a4741589650553; GSIDPE8xI3mBKqVw=d157f2f9-4c3c-4fcc-beee-6e5ff281eae2; optimizelyBuckets=%7B%7D; optimizelySegments=%7B%22985729904%22%3A%22safari%22%2C%22986786736%22%3A%22search%22%2C%22995297024%22%3A%22false%22%7D; 3060738.3440491=7452ec8e-d2bb-4b7f-bcbf-474676736c2a; tracker_device=bfe4ad7b-07db-401e-8b4a-a7739ff53d2d; optimizelyEndUserId=oeu1511627844219r0.6301887025421603',\n              'x-csrf-token': token\n            }\n          };\n          options = {\n            url: 'https://www.flightclub.com/graphql',\n            body: '{\"operationName\":\"getProductTemplate\",\"variables\":{\"slug\":\"' + slug + '\"},\"query\":\"query getProductTemplate($slug: String!) {\\\\n  getProductTemplate(slug: $slug) {\\\\n    id\\\\n    storyHtml\\\\n    sku\\\\n    description\\\\n    releaseDate {\\\\n      shortDisplay\\\\n      __typename\\\\n    }\\\\n    newSizes {\\\\n      productTemplateId\\\\n      size {\\\\n        value\\\\n        display\\\\n        __typename\\\\n      }\\\\n      shoeCondition\\\\n      boxCondition\\\\n      lowestPriceOption {\\\\n        price {\\\\n          value\\\\n          ...ProductTemplatePriceDisplayParts\\\\n          __typename\\\\n        }\\\\n        isAvailable\\\\n        __typename\\\\n      }\\\\n      instantShipPriceOption {\\\\n        price {\\\\n          value\\\\n          ...ProductTemplatePriceDisplayParts\\\\n          __typename\\\\n        }\\\\n        isAvailable\\\\n        __typename\\\\n      }\\\\n      isInstantShip\\\\n      __typename\\\\n    }\\\\n    usedVariants {\\\\n      size {\\\\n        value\\\\n        display\\\\n        __typename\\\\n      }\\\\n      price {\\\\n        value\\\\n        ...ProductTemplatePriceDisplayParts\\\\n        __typename\\\\n      }\\\\n      shoeCondition\\\\n      boxCondition\\\\n      isInstantShip\\\\n      __typename\\\\n    }\\\\n    newLowestPrice {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    usedLowestPrice {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    sizePickerDefault {\\\\n      ...SizePickerOptionParts\\\\n      __typename\\\\n    }\\\\n    sizePickerOptions {\\\\n      ...SizePickerOptionParts\\\\n      __typename\\\\n    }\\\\n    sizeCategory\\\\n    productCategory\\\\n    __typename\\\\n  }\\\\n}\\\\n\\\\nfragment ProductTemplatePriceDisplayParts on Price {\\\\n  display(useGrouping: false, hideEmptyCents: true)\\\\n  localizedValue\\\\n  value\\\\n  __typename\\\\n}\\\\n\\\\nfragment SizePickerOptionParts on SizePickerOption {\\\\n  size {\\\\n    display\\\\n    value\\\\n    __typename\\\\n  }\\\\n  new {\\\\n    shoeCondition\\\\n    boxCondition\\\\n    lowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    instantShipLowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    __typename\\\\n  }\\\\n  used {\\\\n    shoeCondition\\\\n    boxCondition\\\\n    lowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    instantShipLowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    __typename\\\\n  }\\\\n  __typename\\\\n}\\\\n\"}'\n          };\n          let priceMap = {};\n          axios.post(options.url, options.body, config).then(res => {\n            for (var i = 0; i < res.data.data.getProductTemplate.newSizes.length; i++) {\n              priceMap[res.data.data.getProductTemplate.newSizes[i].size.display] = res.data.data.getProductTemplate.newSizes[i].lowestPriceOption.price.value / 100;\n            }\n\n            shoe.resellPrices.flightClub = priceMap;\n            callback(shoe);\n          }).catch(error => {\n            let err = new Error(\"Could not connect to Flight Club while searching '\", shoe.styleID, \"' Error: \", error);\n            console.error(err);\n            callback(shoe);\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/sneaks-api/scrapers/flightclub-scraper.js"],"names":["request","require","axios","module","exports","getLink","shoe","callback","options","url","body","styleID","headers","post","error","response","data","err","Error","console","log","statusCode","json","JSON","parse","results","hits","lowest_price_cents_usd","lowestResellPrice","flightClub","resellLinks","slug","description","story","getPrices","Cookie","split","token","getToken","config","priceMap","then","res","i","getProductTemplate","newSizes","length","size","display","lowestPriceOption","price","value","resellPrices","catch"],"mappings":"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","sourcesContent":["const request = require('request');\nconst axios = require('axios');\n\n\nmodule.exports = {\n    getLink: async function (shoe, callback) {\n\n        var options = {\n            url: \"https://2fwotdvm2o-dsn.algolia.net/1/indexes/*/queries?x-algolia-agent=Algolia%20for%20vanilla%20JavaScript%20(lite)%203.32.0%3Breact-instantsearch%205.4.0%3BJS%20Helper%202.26.1&x-algolia-application-id=2FWOTDVM2O&x-algolia-api-key=ac96de6fef0e02bb95d433d8d5c7038a\",\n            body: \"{\\\"requests\\\":[{\\\"indexName\\\":\\\"product_variants_v2_flight_club\\\",\\\"params\\\":\\\"query=\" + shoe.styleID + \"&hitsPerPage=1&maxValuesPerFacet=1&filters=&facets=%5B%22lowest_price_cents_usd%22%5D&tagFilters=\\\"}]}\",\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.4 Safari/605.1.15-API'\n            }\n        };\n        request.post(options,\n            function (error, response, data) {\n                if (error) {\n                    let err = new Error(\"Could not connect to Flight Club while searching '\" + shoe.styleID + \"' Error: \", error)\n                    console.log(err);\n                    callback(err)\n                } else if (response.statusCode != 200) {\n                    let err = new Error(\"Could not connect to Flight Club while searching '\" + shoe.styleID + \"' -  Status Code: \", response.statusCode)\n                    console.log(err);\n                    callback(err)\n                } else {\n                    var json = JSON.parse(data);\n                    if (json.results[0].hits[0]) {\n                        if (json.results[0].hits[0].lowest_price_cents_usd / 100 != 0) {\n                            shoe.lowestResellPrice.flightClub = json.results[0].hits[0].lowest_price_cents_usd / 100;\n                        }\n                        shoe.resellLinks.flightClub = 'https://www.flightclub.com/' + json.results[0].hits[0].slug;\n                        shoe.description = json.results[0].hits[0].story\n                    }\n                    callback(shoe);\n                }\n\n            }\n        );\n    },\n\n\n    getPrices: function (shoe, callback) {\n        if (!shoe.resellLinks.flightClub) {\n            callback()\n        } else {\n            var options = {\n                url: 'https://www.flightclub.com/token',\n                headers: {\n                    'User-Agent': 'Sneaks-API',\n                    Cookie: '_ga=GA1.2.1305697265.1589650884; _gat_mpgaTracker1=1; _gid=GA1.2.110567219.1592159329; _xsrf=ACpmRhbR-o7gf2gOoZrduFroRkcMReIv0VaM; ab.storage.sessionId.bfd3619a-0e44-4389-b0e4-30cca9ba859f=%7B%22g%22%3A%2270eb2c6d-82af-5175-401c-05b1b17c008f%22%2C%22e%22%3A1592165414984%2C%22c%22%3A1592161566043%2C%22l%22%3A1592163614984%7D; __stripe_mid=23ecdd48-6f99-42e4-a01c-2a3b66ad8f85; __stripe_sid=86d74e96-4eb3-45b0-9ffa-1cbf7ced6deb; _pxde=cb6ac20c0c2d68d7343c4508da0f1aff46a46615056b68de3a61ed3c12945823:eyJ0aW1lc3RhbXAiOjE1OTIxNjM2MTQwMTYsImZfa2IiOjAsImlwY19pZCI6W119; _pxff_rf=1; _fbp=fb.1.1589652394965.825578106; _px=bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:C9OlEdqfQV85zrT3Ehf9ROYfc6Mgwurx6eS70cXnpXIunhz171ULOo4lCIn1qC3vYI643A0+zzTdn6+l1uk/HkjbCTXt3YXepmzx25LgsbiafOofD/M9gfdrWcVTOBTFAzHRdy3AfMFAZMbfjTLLExh7ELWFaXR5Y4AIFSpcoJ9EVy3pi7d8WfLt9ovEk7pSW+jecXGzeR+HDkB5qgTvct9goMe2nH1PyvCNUPxI9h2hENV3WmtkAmWSoSKdfPzmFdOuHZI/bHW7DqJ5KRolxg==; _px3=f9373bd44c36697e1917ffc8bedfebda19b91c675884b6c652b76ad4db11f2b3:bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:JEiKt5U/MzH2hwNkVdu3FcNxxwFWzE9KSdjiOmAKrcchHj9lOSLFukjBQk1imSgxzsQXK6+gcdDQJEOiQdH0xB+GhxplxjaXSJnqWRf72xhdXQDjEFepal/9virvQjrbbe8v/SZ0vqOREwdQpuZ1RaJJySCPaKau67Pv5YF636U=; _csrf=YB0s2Rxh9LAc6PgZIAM7vBo9; _pxvid=b164dfb6-979b-11ea-869f-0242ac12000b; __cfduid=da573444825c291236c950b508eb7a4741589650553; GSIDPE8xI3mBKqVw=d157f2f9-4c3c-4fcc-beee-6e5ff281eae2; optimizelyBuckets=%7B%7D; optimizelySegments=%7B%22985729904%22%3A%22safari%22%2C%22986786736%22%3A%22search%22%2C%22995297024%22%3A%22false%22%7D; 3060738.3440491=7452ec8e-d2bb-4b7f-bcbf-474676736c2a; tracker_device=bfe4ad7b-07db-401e-8b4a-a7739ff53d2d; optimizelyEndUserId=oeu1511627844219r0.6301887025421603'\n                }\n            };\n            let slug = shoe.resellLinks.flightClub.split('.com/')[1];\n            var token;\n            request(options,\n                function getToken(error, response, data) {\n                    if (error) {\n                        let err = new Error(\"Could not connect to Flight Club while getting token - Error: \", error)\n                        console.log(err);\n                        callback(err)\n                    } else if (response.statusCode != 200) {\n                        let err = new Error(\"Could not connect to Flight Club while  getting token-  Status Code: \", response.statusCode)\n                        console.log(err);\n                        callback(err)\n                    } else {\n                        token = data;\n                        let config = {\n                            headers: {\n                                'User-Agent': 'Test',\n                                'Content-Type': 'application/json',\n                                Cookie: '_ga=GA1.2.1305697265.1589650884; _gat_mpgaTracker1=1; _gid=GA1.2.110567219.1592159329; _xsrf=ACpmRhbR-o7gf2gOoZrduFroRkcMReIv0VaM; ab.storage.sessionId.bfd3619a-0e44-4389-b0e4-30cca9ba859f=%7B%22g%22%3A%2270eb2c6d-82af-5175-401c-05b1b17c008f%22%2C%22e%22%3A1592165414984%2C%22c%22%3A1592161566043%2C%22l%22%3A1592163614984%7D; __stripe_mid=23ecdd48-6f99-42e4-a01c-2a3b66ad8f85; __stripe_sid=86d74e96-4eb3-45b0-9ffa-1cbf7ced6deb; _pxde=cb6ac20c0c2d68d7343c4508da0f1aff46a46615056b68de3a61ed3c12945823:eyJ0aW1lc3RhbXAiOjE1OTIxNjM2MTQwMTYsImZfa2IiOjAsImlwY19pZCI6W119; _pxff_rf=1; _fbp=fb.1.1589652394965.825578106; _px=bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:C9OlEdqfQV85zrT3Ehf9ROYfc6Mgwurx6eS70cXnpXIunhz171ULOo4lCIn1qC3vYI643A0+zzTdn6+l1uk/HkjbCTXt3YXepmzx25LgsbiafOofD/M9gfdrWcVTOBTFAzHRdy3AfMFAZMbfjTLLExh7ELWFaXR5Y4AIFSpcoJ9EVy3pi7d8WfLt9ovEk7pSW+jecXGzeR+HDkB5qgTvct9goMe2nH1PyvCNUPxI9h2hENV3WmtkAmWSoSKdfPzmFdOuHZI/bHW7DqJ5KRolxg==; _px3=f9373bd44c36697e1917ffc8bedfebda19b91c675884b6c652b76ad4db11f2b3:bG1e+ChJB5noY44i/b5+ec1RYb3CHINQNxB9uQwsOPJutcYBUMndLvXy2nYUvkInZAw5ccmSKX+Jz2/rg7tThg==:1000:JEiKt5U/MzH2hwNkVdu3FcNxxwFWzE9KSdjiOmAKrcchHj9lOSLFukjBQk1imSgxzsQXK6+gcdDQJEOiQdH0xB+GhxplxjaXSJnqWRf72xhdXQDjEFepal/9virvQjrbbe8v/SZ0vqOREwdQpuZ1RaJJySCPaKau67Pv5YF636U=; _csrf=YB0s2Rxh9LAc6PgZIAM7vBo9; _pxvid=b164dfb6-979b-11ea-869f-0242ac12000b; __cfduid=da573444825c291236c950b508eb7a4741589650553; GSIDPE8xI3mBKqVw=d157f2f9-4c3c-4fcc-beee-6e5ff281eae2; optimizelyBuckets=%7B%7D; optimizelySegments=%7B%22985729904%22%3A%22safari%22%2C%22986786736%22%3A%22search%22%2C%22995297024%22%3A%22false%22%7D; 3060738.3440491=7452ec8e-d2bb-4b7f-bcbf-474676736c2a; tracker_device=bfe4ad7b-07db-401e-8b4a-a7739ff53d2d; optimizelyEndUserId=oeu1511627844219r0.6301887025421603',\n                                'x-csrf-token': token\n\n                            }\n                        }\n                        options = {\n                            url: 'https://www.flightclub.com/graphql',\n                            body: '{\"operationName\":\"getProductTemplate\",\"variables\":{\"slug\":\"' + slug + '\"},\"query\":\"query getProductTemplate($slug: String!) {\\\\n  getProductTemplate(slug: $slug) {\\\\n    id\\\\n    storyHtml\\\\n    sku\\\\n    description\\\\n    releaseDate {\\\\n      shortDisplay\\\\n      __typename\\\\n    }\\\\n    newSizes {\\\\n      productTemplateId\\\\n      size {\\\\n        value\\\\n        display\\\\n        __typename\\\\n      }\\\\n      shoeCondition\\\\n      boxCondition\\\\n      lowestPriceOption {\\\\n        price {\\\\n          value\\\\n          ...ProductTemplatePriceDisplayParts\\\\n          __typename\\\\n        }\\\\n        isAvailable\\\\n        __typename\\\\n      }\\\\n      instantShipPriceOption {\\\\n        price {\\\\n          value\\\\n          ...ProductTemplatePriceDisplayParts\\\\n          __typename\\\\n        }\\\\n        isAvailable\\\\n        __typename\\\\n      }\\\\n      isInstantShip\\\\n      __typename\\\\n    }\\\\n    usedVariants {\\\\n      size {\\\\n        value\\\\n        display\\\\n        __typename\\\\n      }\\\\n      price {\\\\n        value\\\\n        ...ProductTemplatePriceDisplayParts\\\\n        __typename\\\\n      }\\\\n      shoeCondition\\\\n      boxCondition\\\\n      isInstantShip\\\\n      __typename\\\\n    }\\\\n    newLowestPrice {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    usedLowestPrice {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    sizePickerDefault {\\\\n      ...SizePickerOptionParts\\\\n      __typename\\\\n    }\\\\n    sizePickerOptions {\\\\n      ...SizePickerOptionParts\\\\n      __typename\\\\n    }\\\\n    sizeCategory\\\\n    productCategory\\\\n    __typename\\\\n  }\\\\n}\\\\n\\\\nfragment ProductTemplatePriceDisplayParts on Price {\\\\n  display(useGrouping: false, hideEmptyCents: true)\\\\n  localizedValue\\\\n  value\\\\n  __typename\\\\n}\\\\n\\\\nfragment SizePickerOptionParts on SizePickerOption {\\\\n  size {\\\\n    display\\\\n    value\\\\n    __typename\\\\n  }\\\\n  new {\\\\n    shoeCondition\\\\n    boxCondition\\\\n    lowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    instantShipLowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    __typename\\\\n  }\\\\n  used {\\\\n    shoeCondition\\\\n    boxCondition\\\\n    lowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    instantShipLowestPriceCents {\\\\n      ...ProductTemplatePriceDisplayParts\\\\n      __typename\\\\n    }\\\\n    __typename\\\\n  }\\\\n  __typename\\\\n}\\\\n\"}',\n                        }\n                        let priceMap = {};\n                        axios.post(options.url, options.body, config).then(res => {\n                            for (var i = 0; i < res.data.data.getProductTemplate.newSizes.length; i++) {\n                                priceMap[res.data.data.getProductTemplate.newSizes[i].size.display] = res.data.data.getProductTemplate.newSizes[i].lowestPriceOption.price.value / 100;\n                            }\n                            shoe.resellPrices.flightClub = priceMap\n                            callback(shoe);\n                        }).catch(error => {\n                            let err = new Error(\"Could not connect to Flight Club while searching '\", shoe.styleID, \"' Error: \", error)\n                            console.error(err);\n                            callback(shoe);\n                        });\n\n                    }\n                });\n        }\n    }\n}"]},"metadata":{},"sourceType":"script"}