{"ast":null,"code":"\"use strict\";\n\nvar _wrapRegExp = require(\"/Users/dhruv/Sneaks/sneaks-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapRegExp\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnsupportedProtocolError = exports.ReadError = exports.TimeoutError = exports.UploadError = exports.CacheError = exports.HTTPError = exports.MaxRedirectsError = exports.RequestError = exports.setNonEnumerableProperties = exports.knownHookEvents = exports.withoutBody = exports.kIsNormalizedAlready = void 0;\n\nconst util_1 = require(\"util\");\n\nconst stream_1 = require(\"stream\");\n\nconst fs_1 = require(\"fs\");\n\nconst url_1 = require(\"url\");\n\nconst http = require(\"http\");\n\nconst http_1 = require(\"http\");\n\nconst https = require(\"https\");\n\nconst http_timer_1 = require(\"@szmarczak/http-timer\");\n\nconst cacheable_lookup_1 = require(\"cacheable-lookup\");\n\nconst CacheableRequest = require(\"cacheable-request\");\n\nconst decompressResponse = require(\"decompress-response\"); // @ts-expect-error Missing types\n\n\nconst http2wrapper = require(\"http2-wrapper\");\n\nconst lowercaseKeys = require(\"lowercase-keys\");\n\nconst is_1 = require(\"@sindresorhus/is\");\n\nconst get_body_size_1 = require(\"./utils/get-body-size\");\n\nconst is_form_data_1 = require(\"./utils/is-form-data\");\n\nconst proxy_events_1 = require(\"./utils/proxy-events\");\n\nconst timed_out_1 = require(\"./utils/timed-out\");\n\nconst url_to_options_1 = require(\"./utils/url-to-options\");\n\nconst options_to_url_1 = require(\"./utils/options-to-url\");\n\nconst weakable_map_1 = require(\"./utils/weakable-map\");\n\nconst get_buffer_1 = require(\"./utils/get-buffer\");\n\nconst dns_ip_version_1 = require(\"./utils/dns-ip-version\");\n\nconst deprecation_warning_1 = require(\"../utils/deprecation-warning\");\n\nconst kRequest = Symbol('request');\nconst kResponse = Symbol('response');\nconst kResponseSize = Symbol('responseSize');\nconst kDownloadedSize = Symbol('downloadedSize');\nconst kBodySize = Symbol('bodySize');\nconst kUploadedSize = Symbol('uploadedSize');\nconst kServerResponsesPiped = Symbol('serverResponsesPiped');\nconst kUnproxyEvents = Symbol('unproxyEvents');\nconst kIsFromCache = Symbol('isFromCache');\nconst kCancelTimeouts = Symbol('cancelTimeouts');\nconst kStartedReading = Symbol('startedReading');\nconst kStopReading = Symbol('stopReading');\nconst kTriggerRead = Symbol('triggerRead');\nconst kBody = Symbol('body');\nconst kJobs = Symbol('jobs');\nconst kOriginalResponse = Symbol('originalResponse');\nexports.kIsNormalizedAlready = Symbol('isNormalizedAlready');\nconst supportsBrotli = is_1.default.string(process.versions.brotli);\nexports.withoutBody = new Set(['GET', 'HEAD']);\nexports.knownHookEvents = ['init', 'beforeRequest', 'beforeRedirect', 'beforeError'];\n\nfunction validateSearchParameters(searchParameters) {\n  // eslint-disable-next-line guard-for-in\n  for (const key in searchParameters) {\n    const value = searchParameters[key];\n\n    if (!is_1.default.string(value) && !is_1.default.number(value) && !is_1.default.boolean(value) && !is_1.default.null_(value) && !is_1.default.undefined(value)) {\n      throw new TypeError(`The \\`searchParams\\` value '${String(value)}' must be a string, number, boolean or null`);\n    }\n  }\n}\n\nfunction isClientRequest(clientRequest) {\n  return is_1.default.object(clientRequest) && !('statusCode' in clientRequest);\n}\n\nconst cacheableStore = new weakable_map_1.default();\n\nconst waitForOpenFile = async file => new Promise((resolve, reject) => {\n  const onError = error => {\n    reject(error);\n  }; // Node.js 12 has incomplete types\n\n\n  if (!file.pending) {\n    resolve();\n  }\n\n  file.once('error', onError);\n  file.once('ready', () => {\n    file.off('error', onError);\n    resolve();\n  });\n});\n\nconst redirectCodes = new Set([300, 301, 302, 303, 304, 307, 308]);\nconst nonEnumerableProperties = ['context', 'body', 'json', 'form'];\n\nexports.setNonEnumerableProperties = (sources, to) => {\n  // Non enumerable properties shall not be merged\n  const properties = {};\n\n  for (const source of sources) {\n    if (!source) {\n      continue;\n    }\n\n    for (const name of nonEnumerableProperties) {\n      if (!(name in source)) {\n        continue;\n      }\n\n      properties[name] = {\n        writable: true,\n        configurable: true,\n        enumerable: false,\n        // @ts-expect-error TS doesn't see the check above\n        value: source[name]\n      };\n    }\n  }\n\n  Object.defineProperties(to, properties);\n};\n\nclass RequestError extends Error {\n  constructor(message, error, self) {\n    var _a;\n\n    super(message);\n    Error.captureStackTrace(this, this.constructor);\n    this.name = 'RequestError';\n    this.code = error.code;\n\n    if (self instanceof Request) {\n      Object.defineProperty(this, 'request', {\n        enumerable: false,\n        value: self\n      });\n      Object.defineProperty(this, 'response', {\n        enumerable: false,\n        value: self[kResponse]\n      });\n      Object.defineProperty(this, 'options', {\n        // This fails because of TS 3.7.2 useDefineForClassFields\n        // Ref: https://github.com/microsoft/TypeScript/issues/34972\n        enumerable: false,\n        value: self.options\n      });\n    } else {\n      Object.defineProperty(this, 'options', {\n        // This fails because of TS 3.7.2 useDefineForClassFields\n        // Ref: https://github.com/microsoft/TypeScript/issues/34972\n        enumerable: false,\n        value: self\n      });\n    }\n\n    this.timings = (_a = this.request) === null || _a === void 0 ? void 0 : _a.timings; // Recover the original stacktrace\n\n    if (!is_1.default.undefined(error.stack)) {\n      const indexOfMessage = this.stack.indexOf(this.message) + this.message.length;\n      const thisStackTrace = this.stack.slice(indexOfMessage).split('\\n').reverse();\n      const errorStackTrace = error.stack.slice(error.stack.indexOf(error.message) + error.message.length).split('\\n').reverse(); // Remove duplicated traces\n\n      while (errorStackTrace.length !== 0 && errorStackTrace[0] === thisStackTrace[0]) {\n        thisStackTrace.shift();\n      }\n\n      this.stack = `${this.stack.slice(0, indexOfMessage)}${thisStackTrace.reverse().join('\\n')}${errorStackTrace.reverse().join('\\n')}`;\n    }\n  }\n\n}\n\nexports.RequestError = RequestError;\n\nclass MaxRedirectsError extends RequestError {\n  constructor(request) {\n    super(`Redirected ${request.options.maxRedirects} times. Aborting.`, {}, request);\n    this.name = 'MaxRedirectsError';\n  }\n\n}\n\nexports.MaxRedirectsError = MaxRedirectsError;\n\nclass HTTPError extends RequestError {\n  constructor(response) {\n    super(`Response code ${response.statusCode} (${response.statusMessage})`, {}, response.request);\n    this.name = 'HTTPError';\n  }\n\n}\n\nexports.HTTPError = HTTPError;\n\nclass CacheError extends RequestError {\n  constructor(error, request) {\n    super(error.message, error, request);\n    this.name = 'CacheError';\n  }\n\n}\n\nexports.CacheError = CacheError;\n\nclass UploadError extends RequestError {\n  constructor(error, request) {\n    super(error.message, error, request);\n    this.name = 'UploadError';\n  }\n\n}\n\nexports.UploadError = UploadError;\n\nclass TimeoutError extends RequestError {\n  constructor(error, timings, request) {\n    super(error.message, error, request);\n    this.name = 'TimeoutError';\n    this.event = error.event;\n    this.timings = timings;\n  }\n\n}\n\nexports.TimeoutError = TimeoutError;\n\nclass ReadError extends RequestError {\n  constructor(error, request) {\n    super(error.message, error, request);\n    this.name = 'ReadError';\n  }\n\n}\n\nexports.ReadError = ReadError;\n\nclass UnsupportedProtocolError extends RequestError {\n  constructor(options) {\n    super(`Unsupported protocol \"${options.url.protocol}\"`, {}, options);\n    this.name = 'UnsupportedProtocolError';\n  }\n\n}\n\nexports.UnsupportedProtocolError = UnsupportedProtocolError;\nconst proxiedRequestEvents = ['socket', 'connect', 'continue', 'information', 'upgrade', 'timeout'];\n\nclass Request extends stream_1.Duplex {\n  constructor(url, options = {}, defaults) {\n    super({\n      // It needs to be zero because we're just proxying the data to another stream\n      highWaterMark: 0\n    });\n    this[kDownloadedSize] = 0;\n    this[kUploadedSize] = 0;\n    this.requestInitialized = false;\n    this[kServerResponsesPiped] = new Set();\n    this.redirects = [];\n    this[kStopReading] = false;\n    this[kTriggerRead] = false;\n    this[kJobs] = []; // TODO: Remove this when targeting Node.js >= 12\n\n    this._progressCallbacks = [];\n\n    const unlockWrite = () => this._unlockWrite();\n\n    const lockWrite = () => this._lockWrite();\n\n    this.on('pipe', source => {\n      source.prependListener('data', unlockWrite);\n      source.on('data', lockWrite);\n      source.prependListener('end', unlockWrite);\n      source.on('end', lockWrite);\n    });\n    this.on('unpipe', source => {\n      source.off('data', unlockWrite);\n      source.off('data', lockWrite);\n      source.off('end', unlockWrite);\n      source.off('end', lockWrite);\n    });\n    this.on('pipe', source => {\n      if (source instanceof http_1.IncomingMessage) {\n        this.options.headers = { ...source.headers,\n          ...this.options.headers\n        };\n      }\n    });\n    const {\n      json,\n      body,\n      form\n    } = options;\n\n    if (json || body || form) {\n      this._lockWrite();\n    }\n\n    (async nonNormalizedOptions => {\n      var _a;\n\n      try {\n        if (nonNormalizedOptions.body instanceof fs_1.ReadStream) {\n          await waitForOpenFile(nonNormalizedOptions.body);\n        }\n\n        if (exports.kIsNormalizedAlready in nonNormalizedOptions) {\n          this.options = nonNormalizedOptions;\n        } else {\n          // @ts-expect-error Common TypeScript bug saying that `this.constructor` is not accessible\n          this.options = this.constructor.normalizeArguments(url, nonNormalizedOptions, defaults);\n        }\n\n        const {\n          url: normalizedURL\n        } = this.options;\n\n        if (!normalizedURL) {\n          throw new TypeError('Missing `url` property');\n        }\n\n        this.requestUrl = normalizedURL.toString();\n        decodeURI(this.requestUrl);\n        await this._finalizeBody();\n        await this._makeRequest();\n\n        if (this.destroyed) {\n          (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.destroy();\n          return;\n        } // Queued writes etc.\n\n\n        for (const job of this[kJobs]) {\n          job();\n        }\n\n        this.requestInitialized = true;\n      } catch (error) {\n        if (error instanceof RequestError) {\n          this._beforeError(error);\n\n          return;\n        } // This is a workaround for https://github.com/nodejs/node/issues/33335\n\n\n        if (!this.destroyed) {\n          this.destroy(error);\n        }\n      }\n    })(options);\n  }\n\n  static normalizeArguments(url, options, defaults) {\n    var _a, _b, _c, _d;\n\n    const rawOptions = options;\n\n    if (is_1.default.object(url) && !is_1.default.urlInstance(url)) {\n      options = { ...defaults,\n        ...url,\n        ...options\n      };\n    } else {\n      if (url && options && options.url !== undefined) {\n        throw new TypeError('The `url` option is mutually exclusive with the `input` argument');\n      }\n\n      options = { ...defaults,\n        ...options\n      };\n\n      if (url !== undefined) {\n        options.url = url;\n      }\n\n      if (is_1.default.urlInstance(options.url)) {\n        options.url = new url_1.URL(options.url.toString());\n      }\n    } // TODO: Deprecate URL options in Got 12.\n    // Support extend-specific options\n\n\n    if (options.cache === false) {\n      options.cache = undefined;\n    }\n\n    if (options.dnsCache === false) {\n      options.dnsCache = undefined;\n    } // Nice type assertions\n\n\n    is_1.assert.any([is_1.default.string, is_1.default.undefined], options.method);\n    is_1.assert.any([is_1.default.object, is_1.default.undefined], options.headers);\n    is_1.assert.any([is_1.default.string, is_1.default.urlInstance, is_1.default.undefined], options.prefixUrl);\n    is_1.assert.any([is_1.default.object, is_1.default.undefined], options.cookieJar);\n    is_1.assert.any([is_1.default.object, is_1.default.string, is_1.default.undefined], options.searchParams);\n    is_1.assert.any([is_1.default.object, is_1.default.string, is_1.default.undefined], options.cache);\n    is_1.assert.any([is_1.default.object, is_1.default.number, is_1.default.undefined], options.timeout);\n    is_1.assert.any([is_1.default.object, is_1.default.undefined], options.context);\n    is_1.assert.any([is_1.default.object, is_1.default.undefined], options.hooks);\n    is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.decompress);\n    is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.ignoreInvalidCookies);\n    is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.followRedirect);\n    is_1.assert.any([is_1.default.number, is_1.default.undefined], options.maxRedirects);\n    is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.throwHttpErrors);\n    is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.http2);\n    is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.allowGetBody);\n    is_1.assert.any([is_1.default.string, is_1.default.undefined], options.localAddress);\n    is_1.assert.any([dns_ip_version_1.isDnsLookupIpVersion, is_1.default.undefined], options.dnsLookupIpVersion);\n    is_1.assert.any([is_1.default.object, is_1.default.undefined], options.https);\n    is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.rejectUnauthorized);\n\n    if (options.https) {\n      is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.https.rejectUnauthorized);\n      is_1.assert.any([is_1.default.function_, is_1.default.undefined], options.https.checkServerIdentity);\n      is_1.assert.any([is_1.default.string, is_1.default.object, is_1.default.array, is_1.default.undefined], options.https.certificateAuthority);\n      is_1.assert.any([is_1.default.string, is_1.default.object, is_1.default.array, is_1.default.undefined], options.https.key);\n      is_1.assert.any([is_1.default.string, is_1.default.object, is_1.default.array, is_1.default.undefined], options.https.certificate);\n      is_1.assert.any([is_1.default.string, is_1.default.undefined], options.https.passphrase);\n    } // `options.method`\n\n\n    if (is_1.default.string(options.method)) {\n      options.method = options.method.toUpperCase();\n    } else {\n      options.method = 'GET';\n    } // `options.headers`\n\n\n    if (options.headers === (defaults === null || defaults === void 0 ? void 0 : defaults.headers)) {\n      options.headers = { ...options.headers\n      };\n    } else {\n      options.headers = lowercaseKeys({ ...(defaults === null || defaults === void 0 ? void 0 : defaults.headers),\n        ...options.headers\n      });\n    } // Disallow legacy `url.Url`\n\n\n    if ('slashes' in options) {\n      throw new TypeError('The legacy `url.Url` has been deprecated. Use `URL` instead.');\n    } // `options.auth`\n\n\n    if ('auth' in options) {\n      throw new TypeError('Parameter `auth` is deprecated. Use `username` / `password` instead.');\n    } // `options.searchParams`\n\n\n    if ('searchParams' in options) {\n      if (options.searchParams && options.searchParams !== (defaults === null || defaults === void 0 ? void 0 : defaults.searchParams)) {\n        let searchParameters;\n\n        if (is_1.default.string(options.searchParams) || options.searchParams instanceof url_1.URLSearchParams) {\n          searchParameters = new url_1.URLSearchParams(options.searchParams);\n        } else {\n          validateSearchParameters(options.searchParams);\n          searchParameters = new url_1.URLSearchParams(); // eslint-disable-next-line guard-for-in\n\n          for (const key in options.searchParams) {\n            const value = options.searchParams[key];\n\n            if (value === null) {\n              searchParameters.append(key, '');\n            } else if (value !== undefined) {\n              searchParameters.append(key, value);\n            }\n          }\n        } // `normalizeArguments()` is also used to merge options\n\n\n        (_a = defaults === null || defaults === void 0 ? void 0 : defaults.searchParams) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => {\n          // Only use default if one isn't already defined\n          if (!searchParameters.has(key)) {\n            searchParameters.append(key, value);\n          }\n        });\n        options.searchParams = searchParameters;\n      }\n    } // `options.username` & `options.password`\n\n\n    options.username = (_b = options.username) !== null && _b !== void 0 ? _b : '';\n    options.password = (_c = options.password) !== null && _c !== void 0 ? _c : ''; // `options.prefixUrl` & `options.url`\n\n    if (options.prefixUrl) {\n      options.prefixUrl = options.prefixUrl.toString();\n\n      if (options.prefixUrl !== '' && !options.prefixUrl.endsWith('/')) {\n        options.prefixUrl += '/';\n      }\n    } else {\n      options.prefixUrl = '';\n    }\n\n    if (is_1.default.string(options.url)) {\n      if (options.url.startsWith('/')) {\n        throw new Error('`input` must not start with a slash when using `prefixUrl`');\n      }\n\n      options.url = options_to_url_1.default(options.prefixUrl + options.url, options);\n    } else if (is_1.default.undefined(options.url) && options.prefixUrl !== '' || options.protocol) {\n      options.url = options_to_url_1.default(options.prefixUrl, options);\n    }\n\n    if (options.url) {\n      // Make it possible to change `options.prefixUrl`\n      let {\n        prefixUrl\n      } = options;\n      Object.defineProperty(options, 'prefixUrl', {\n        set: value => {\n          const url = options.url;\n\n          if (!url.href.startsWith(value)) {\n            throw new Error(`Cannot change \\`prefixUrl\\` from ${prefixUrl} to ${value}: ${url.href}`);\n          }\n\n          options.url = new url_1.URL(value + url.href.slice(prefixUrl.length));\n          prefixUrl = value;\n        },\n        get: () => prefixUrl\n      }); // Support UNIX sockets\n\n      let {\n        protocol\n      } = options.url;\n\n      if (protocol === 'unix:') {\n        protocol = 'http:';\n        options.url = new url_1.URL(`http://unix${options.url.pathname}${options.url.search}`);\n      } // Set search params\n\n\n      if (options.searchParams) {\n        // eslint-disable-next-line @typescript-eslint/no-base-to-string\n        options.url.search = options.searchParams.toString();\n      } // Protocol check\n\n\n      if (protocol !== 'http:' && protocol !== 'https:') {\n        throw new UnsupportedProtocolError(options);\n      } // Update `username`\n\n\n      if (options.username === '') {\n        options.username = options.url.username;\n      } else {\n        options.url.username = options.username;\n      } // Update `password`\n\n\n      if (options.password === '') {\n        options.password = options.url.password;\n      } else {\n        options.url.password = options.password;\n      }\n    } // `options.cookieJar`\n\n\n    const {\n      cookieJar\n    } = options;\n\n    if (cookieJar) {\n      let {\n        setCookie,\n        getCookieString\n      } = cookieJar;\n      is_1.assert.function_(setCookie);\n      is_1.assert.function_(getCookieString);\n      /* istanbul ignore next: Horrible `tough-cookie` v3 check */\n\n      if (setCookie.length === 4 && getCookieString.length === 0) {\n        setCookie = util_1.promisify(setCookie.bind(options.cookieJar));\n        getCookieString = util_1.promisify(getCookieString.bind(options.cookieJar));\n        options.cookieJar = {\n          setCookie,\n          // TODO: Fix this when upgrading to TypeScript 4.\n          // @ts-expect-error TypeScript thinks that promisifying callback(error, string) will result in Promise<void>\n          getCookieString\n        };\n      }\n    } // `options.cache`\n\n\n    const {\n      cache\n    } = options;\n\n    if (cache) {\n      if (!cacheableStore.has(cache)) {\n        cacheableStore.set(cache, new CacheableRequest((requestOptions, handler) => {\n          const result = requestOptions[kRequest](requestOptions, handler); // TODO: remove this when `cacheable-request` supports async request functions.\n\n          if (is_1.default.promise(result)) {\n            // @ts-expect-error\n            // We only need to implement the error handler in order to support HTTP2 caching.\n            // The result will be a promise anyway.\n            result.once = (event, handler) => {\n              if (event === 'error') {\n                result.catch(handler);\n              } else if (event === 'abort') {\n                // The empty catch is needed here in case when\n                // it rejects before it's `await`ed in `_makeRequest`.\n                (async () => {\n                  try {\n                    const request = await result;\n                    request.once('abort', handler);\n                  } catch (_a) {}\n                })();\n              } else {\n                /* istanbul ignore next: safety check */\n                throw new Error(`Unknown HTTP2 promise event: ${event}`);\n              }\n\n              return result;\n            };\n          }\n\n          return result;\n        }, cache));\n      }\n    } // `options.dnsCache`\n\n\n    if (options.dnsCache === true) {\n      options.dnsCache = new cacheable_lookup_1.default();\n    } else if (!is_1.default.undefined(options.dnsCache) && !options.dnsCache.lookup) {\n      throw new TypeError(`Parameter \\`dnsCache\\` must be a CacheableLookup instance or a boolean, got ${is_1.default(options.dnsCache)}`);\n    } // `options.timeout`\n\n\n    if (is_1.default.number(options.timeout)) {\n      options.timeout = {\n        request: options.timeout\n      };\n    } else if (defaults && options.timeout !== defaults.timeout) {\n      options.timeout = { ...defaults.timeout,\n        ...options.timeout\n      };\n    } else {\n      options.timeout = { ...options.timeout\n      };\n    } // `options.context`\n\n\n    if (!options.context) {\n      options.context = {};\n    } // `options.hooks`\n\n\n    const areHooksDefault = options.hooks === (defaults === null || defaults === void 0 ? void 0 : defaults.hooks);\n    options.hooks = { ...options.hooks\n    };\n\n    for (const event of exports.knownHookEvents) {\n      if (event in options.hooks) {\n        if (is_1.default.array(options.hooks[event])) {\n          // See https://github.com/microsoft/TypeScript/issues/31445#issuecomment-576929044\n          options.hooks[event] = [...options.hooks[event]];\n        } else {\n          throw new TypeError(`Parameter \\`${event}\\` must be an Array, got ${is_1.default(options.hooks[event])}`);\n        }\n      } else {\n        options.hooks[event] = [];\n      }\n    }\n\n    if (defaults && !areHooksDefault) {\n      for (const event of exports.knownHookEvents) {\n        const defaultHooks = defaults.hooks[event];\n\n        if (defaultHooks.length !== 0) {\n          // See https://github.com/microsoft/TypeScript/issues/31445#issuecomment-576929044\n          options.hooks[event] = [...defaults.hooks[event], ...options.hooks[event]];\n        }\n      }\n    } // DNS options\n\n\n    if ('family' in options) {\n      deprecation_warning_1.default('\"options.family\" was never documented, please use \"options.dnsLookupIpVersion\"');\n    } // HTTPS options\n\n\n    if (defaults === null || defaults === void 0 ? void 0 : defaults.https) {\n      options.https = { ...defaults.https,\n        ...options.https\n      };\n    }\n\n    if ('rejectUnauthorized' in options) {\n      deprecation_warning_1.default('\"options.rejectUnauthorized\" is now deprecated, please use \"options.https.rejectUnauthorized\"');\n    }\n\n    if ('checkServerIdentity' in options) {\n      deprecation_warning_1.default('\"options.checkServerIdentity\" was never documented, please use \"options.https.checkServerIdentity\"');\n    }\n\n    if ('ca' in options) {\n      deprecation_warning_1.default('\"options.ca\" was never documented, please use \"options.https.certificateAuthority\"');\n    }\n\n    if ('key' in options) {\n      deprecation_warning_1.default('\"options.key\" was never documented, please use \"options.https.key\"');\n    }\n\n    if ('cert' in options) {\n      deprecation_warning_1.default('\"options.cert\" was never documented, please use \"options.https.certificate\"');\n    }\n\n    if ('passphrase' in options) {\n      deprecation_warning_1.default('\"options.passphrase\" was never documented, please use \"options.https.passphrase\"');\n    } // Other options\n\n\n    if ('followRedirects' in options) {\n      throw new TypeError('The `followRedirects` option does not exist. Use `followRedirect` instead.');\n    }\n\n    if (options.agent) {\n      for (const key in options.agent) {\n        if (key !== 'http' && key !== 'https' && key !== 'http2') {\n          throw new TypeError(`Expected the \\`options.agent\\` properties to be \\`http\\`, \\`https\\` or \\`http2\\`, got \\`${key}\\``);\n        }\n      }\n    }\n\n    options.maxRedirects = (_d = options.maxRedirects) !== null && _d !== void 0 ? _d : 0; // Set non-enumerable properties\n\n    exports.setNonEnumerableProperties([defaults, rawOptions], options);\n    return options;\n  }\n\n  _lockWrite() {\n    const onLockedWrite = () => {\n      throw new TypeError('The payload has been already provided');\n    };\n\n    this.write = onLockedWrite;\n    this.end = onLockedWrite;\n  }\n\n  _unlockWrite() {\n    this.write = super.write;\n    this.end = super.end;\n  }\n\n  async _finalizeBody() {\n    const {\n      options\n    } = this;\n    const {\n      headers\n    } = options;\n    const isForm = !is_1.default.undefined(options.form);\n    const isJSON = !is_1.default.undefined(options.json);\n    const isBody = !is_1.default.undefined(options.body);\n    const hasPayload = isForm || isJSON || isBody;\n    const cannotHaveBody = exports.withoutBody.has(options.method) && !(options.method === 'GET' && options.allowGetBody);\n    this._cannotHaveBody = cannotHaveBody;\n\n    if (hasPayload) {\n      if (cannotHaveBody) {\n        throw new TypeError(`The \\`${options.method}\\` method cannot be used with a body`);\n      }\n\n      if ([isBody, isForm, isJSON].filter(isTrue => isTrue).length > 1) {\n        throw new TypeError('The `body`, `json` and `form` options are mutually exclusive');\n      }\n\n      if (isBody && !(options.body instanceof stream_1.Readable) && !is_1.default.string(options.body) && !is_1.default.buffer(options.body) && !is_form_data_1.default(options.body)) {\n        throw new TypeError('The `body` option must be a stream.Readable, string or Buffer');\n      }\n\n      if (isForm && !is_1.default.object(options.form)) {\n        throw new TypeError('The `form` option must be an Object');\n      }\n\n      {\n        // Serialize body\n        const noContentType = !is_1.default.string(headers['content-type']);\n\n        if (isBody) {\n          // Special case for https://github.com/form-data/form-data\n          if (is_form_data_1.default(options.body) && noContentType) {\n            headers['content-type'] = `multipart/form-data; boundary=${options.body.getBoundary()}`;\n          }\n\n          this[kBody] = options.body;\n        } else if (isForm) {\n          if (noContentType) {\n            headers['content-type'] = 'application/x-www-form-urlencoded';\n          }\n\n          this[kBody] = new url_1.URLSearchParams(options.form).toString();\n        } else {\n          if (noContentType) {\n            headers['content-type'] = 'application/json';\n          }\n\n          this[kBody] = options.stringifyJson(options.json);\n        }\n\n        const uploadBodySize = await get_body_size_1.default(this[kBody], options.headers); // See https://tools.ietf.org/html/rfc7230#section-3.3.2\n        // A user agent SHOULD send a Content-Length in a request message when\n        // no Transfer-Encoding is sent and the request method defines a meaning\n        // for an enclosed payload body.  For example, a Content-Length header\n        // field is normally sent in a POST request even when the value is 0\n        // (indicating an empty payload body).  A user agent SHOULD NOT send a\n        // Content-Length header field when the request message does not contain\n        // a payload body and the method semantics do not anticipate such a\n        // body.\n\n        if (is_1.default.undefined(headers['content-length']) && is_1.default.undefined(headers['transfer-encoding'])) {\n          if (!cannotHaveBody && !is_1.default.undefined(uploadBodySize)) {\n            headers['content-length'] = String(uploadBodySize);\n          }\n        }\n      }\n    } else if (cannotHaveBody) {\n      this._lockWrite();\n    } else {\n      this._unlockWrite();\n    }\n\n    this[kBodySize] = Number(headers['content-length']) || undefined;\n  }\n\n  async _onResponseBase(response) {\n    const {\n      options\n    } = this;\n    const {\n      url\n    } = options;\n    this[kOriginalResponse] = response;\n\n    if (options.decompress) {\n      response = decompressResponse(response);\n    }\n\n    const statusCode = response.statusCode;\n    const typedResponse = response;\n    typedResponse.statusMessage = typedResponse.statusMessage ? typedResponse.statusMessage : http.STATUS_CODES[statusCode];\n    typedResponse.url = options.url.toString();\n    typedResponse.requestUrl = this.requestUrl;\n    typedResponse.redirectUrls = this.redirects;\n    typedResponse.request = this;\n    typedResponse.isFromCache = response.fromCache || false;\n    typedResponse.ip = this.ip;\n    this[kIsFromCache] = typedResponse.isFromCache;\n    this[kResponseSize] = Number(response.headers['content-length']) || undefined;\n    this[kResponse] = response;\n    response.once('end', () => {\n      this[kResponseSize] = this[kDownloadedSize];\n      this.emit('downloadProgress', this.downloadProgress);\n    });\n    response.once('error', error => {\n      // Force clean-up, because some packages don't do this.\n      // TODO: Fix decompress-response\n      response.destroy();\n\n      this._beforeError(new ReadError(error, this));\n    });\n    response.once('aborted', () => {\n      this._beforeError(new ReadError({\n        name: 'Error',\n        message: 'The server aborted pending request',\n        code: 'ECONNRESET'\n      }, this));\n    });\n    this.emit('downloadProgress', this.downloadProgress);\n    const rawCookies = response.headers['set-cookie'];\n\n    if (is_1.default.object(options.cookieJar) && rawCookies) {\n      let promises = rawCookies.map(async rawCookie => options.cookieJar.setCookie(rawCookie, url.toString()));\n\n      if (options.ignoreInvalidCookies) {\n        promises = promises.map(async p => p.catch(() => {}));\n      }\n\n      try {\n        await Promise.all(promises);\n      } catch (error) {\n        this._beforeError(error);\n\n        return;\n      }\n    }\n\n    if (options.followRedirect && response.headers.location && redirectCodes.has(statusCode)) {\n      // We're being redirected, we don't care about the response.\n      // It'd be besto to abort the request, but we can't because\n      // we would have to sacrifice the TCP connection. We don't want that.\n      response.resume();\n\n      if (this[kRequest]) {\n        this[kCancelTimeouts](); // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n\n        delete this[kRequest];\n        this[kUnproxyEvents]();\n      }\n\n      const shouldBeGet = statusCode === 303 && options.method !== 'GET' && options.method !== 'HEAD';\n\n      if (shouldBeGet || !options.methodRewriting) {\n        // Server responded with \"see other\", indicating that the resource exists at another location,\n        // and the client should request it from that location via GET or HEAD.\n        options.method = 'GET';\n\n        if ('body' in options) {\n          delete options.body;\n        }\n\n        if ('json' in options) {\n          delete options.json;\n        }\n\n        if ('form' in options) {\n          delete options.form;\n        }\n      }\n\n      if (this.redirects.length >= options.maxRedirects) {\n        this._beforeError(new MaxRedirectsError(this));\n\n        return;\n      }\n\n      try {\n        // Do not remove. See https://github.com/sindresorhus/got/pull/214\n        const redirectBuffer = Buffer.from(response.headers.location, 'binary').toString(); // Handles invalid URLs. See https://github.com/sindresorhus/got/issues/604\n\n        const redirectUrl = new url_1.URL(redirectBuffer, url);\n        const redirectString = redirectUrl.toString();\n        decodeURI(redirectString); // Redirecting to a different site, clear sensitive data.\n\n        if (redirectUrl.hostname !== url.hostname) {\n          if ('host' in options.headers) {\n            delete options.headers.host;\n          }\n\n          if ('cookie' in options.headers) {\n            delete options.headers.cookie;\n          }\n\n          if ('authorization' in options.headers) {\n            delete options.headers.authorization;\n          }\n\n          if (options.username || options.password) {\n            delete options.username;\n            delete options.password;\n          }\n        }\n\n        this.redirects.push(redirectString);\n        options.url = redirectUrl;\n\n        for (const hook of options.hooks.beforeRedirect) {\n          // eslint-disable-next-line no-await-in-loop\n          await hook(options, typedResponse);\n        }\n\n        this.emit('redirect', typedResponse, options);\n        await this._makeRequest();\n      } catch (error) {\n        this._beforeError(error);\n\n        return;\n      }\n\n      return;\n    }\n\n    const limitStatusCode = options.followRedirect ? 299 : 399;\n    const isOk = statusCode >= 200 && statusCode <= limitStatusCode || statusCode === 304;\n\n    if (options.throwHttpErrors && !isOk) {\n      // Normally we would have to use `void [await] this._beforeError(error)` everywhere,\n      // but since there's `void (async () => { ... })()` inside of it, we don't have to.\n      this._beforeError(new HTTPError(typedResponse)); // This is equivalent to this.destroyed\n\n\n      if (this[kStopReading]) {\n        return;\n      }\n    }\n\n    response.on('readable', () => {\n      if (this[kTriggerRead]) {\n        this._read();\n      }\n    });\n    this.on('resume', () => {\n      response.resume();\n    });\n    this.on('pause', () => {\n      response.pause();\n    });\n    response.once('end', () => {\n      this.push(null);\n    });\n    this.emit('response', response);\n\n    for (const destination of this[kServerResponsesPiped]) {\n      if (destination.headersSent) {\n        continue;\n      } // eslint-disable-next-line guard-for-in\n\n\n      for (const key in response.headers) {\n        const isAllowed = options.decompress ? key !== 'content-encoding' : true;\n        const value = response.headers[key];\n\n        if (isAllowed) {\n          destination.setHeader(key, value);\n        }\n      }\n\n      destination.statusCode = statusCode;\n    }\n  }\n\n  async _onResponse(response) {\n    try {\n      await this._onResponseBase(response);\n    } catch (error) {\n      this._beforeError(error);\n    }\n  }\n\n  _onRequest(request) {\n    const {\n      options\n    } = this;\n    const {\n      timeout,\n      url\n    } = options;\n    http_timer_1.default(request);\n    this[kCancelTimeouts] = timed_out_1.default(request, timeout, url);\n    const responseEventName = options.cache ? 'cacheableResponse' : 'response';\n    request.once(responseEventName, response => {\n      void this._onResponse(response);\n    });\n    request.once('error', error => {\n      var _a; // Force clean-up, because some packages (e.g. nock) don't do this.\n\n\n      request.destroy(); // Node.js <= 12.18.2 mistakenly emits the response `end` first.\n\n      (_a = request.res) === null || _a === void 0 ? void 0 : _a.removeAllListeners('end');\n\n      if (error instanceof timed_out_1.TimeoutError) {\n        error = new TimeoutError(error, this.timings, this);\n      } else {\n        error = new RequestError(error.message, error, this);\n      }\n\n      this._beforeError(error);\n    });\n    this[kUnproxyEvents] = proxy_events_1.default(request, this, proxiedRequestEvents);\n    this[kRequest] = request;\n    this.emit('uploadProgress', this.uploadProgress); // Send body\n\n    const body = this[kBody];\n    const currentRequest = this.redirects.length === 0 ? this : request;\n\n    if (is_1.default.nodeStream(body)) {\n      body.pipe(currentRequest);\n      body.once('error', error => {\n        this._beforeError(new UploadError(error, this));\n      });\n      body.once('end', () => {\n        delete options.body;\n      });\n    } else {\n      this._unlockWrite();\n\n      if (!is_1.default.undefined(body)) {\n        this._writeRequest(body, undefined, () => {});\n\n        currentRequest.end();\n\n        this._lockWrite();\n      } else if (this._cannotHaveBody || this._noPipe) {\n        currentRequest.end();\n\n        this._lockWrite();\n      }\n    }\n\n    this.emit('request', request);\n  }\n\n  async _createCacheableRequest(url, options) {\n    return new Promise((resolve, reject) => {\n      // TODO: Remove `utils/url-to-options.ts` when `cacheable-request` is fixed\n      Object.assign(options, url_to_options_1.default(url)); // `http-cache-semantics` checks this\n\n      delete options.url;\n      let request; // This is ugly\n\n      const cacheRequest = cacheableStore.get(options.cache)(options, async response => {\n        // TODO: Fix `cacheable-response`\n        response._readableState.autoDestroy = false;\n\n        if (request) {\n          (await request).emit('cacheableResponse', response);\n        }\n\n        resolve(response);\n      }); // Restore options\n\n      options.url = url;\n      cacheRequest.once('error', reject);\n      cacheRequest.once('request', async requestOrPromise => {\n        request = requestOrPromise;\n        resolve(request);\n      });\n    });\n  }\n\n  async _makeRequest() {\n    var _a;\n\n    const {\n      options\n    } = this;\n    const {\n      headers\n    } = options;\n\n    for (const key in headers) {\n      if (is_1.default.undefined(headers[key])) {\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete headers[key];\n      } else if (is_1.default.null_(headers[key])) {\n        throw new TypeError(`Use \\`undefined\\` instead of \\`null\\` to delete the \\`${key}\\` header`);\n      }\n    }\n\n    if (options.decompress && is_1.default.undefined(headers['accept-encoding'])) {\n      headers['accept-encoding'] = supportsBrotli ? 'gzip, deflate, br' : 'gzip, deflate';\n    } // Set cookies\n\n\n    if (options.cookieJar) {\n      const cookieString = await options.cookieJar.getCookieString(options.url.toString());\n\n      if (is_1.default.nonEmptyString(cookieString)) {\n        options.headers.cookie = cookieString;\n      }\n    }\n\n    for (const hook of options.hooks.beforeRequest) {\n      // eslint-disable-next-line no-await-in-loop\n      const result = await hook(options);\n\n      if (!is_1.default.undefined(result)) {\n        // @ts-expect-error Skip the type mismatch to support abstract responses\n        options.request = () => result;\n\n        break;\n      }\n    }\n\n    const {\n      agent,\n      request,\n      timeout,\n      url\n    } = options;\n\n    if (options.dnsCache && !('lookup' in options)) {\n      options.lookup = options.dnsCache.lookup;\n    } // UNIX sockets\n\n\n    if (url.hostname === 'unix') {\n      const matches = /*#__PURE__*/_wrapRegExp(/(.+?):(.+)/, {\n        socketPath: 1,\n        path: 2\n      }).exec(`${url.pathname}${url.search}`);\n\n      if (matches === null || matches === void 0 ? void 0 : matches.groups) {\n        const {\n          socketPath,\n          path\n        } = matches.groups;\n        Object.assign(options, {\n          socketPath,\n          path,\n          host: ''\n        });\n      }\n    }\n\n    const isHttps = url.protocol === 'https:'; // Fallback function\n\n    let fallbackFn;\n\n    if (options.http2) {\n      fallbackFn = http2wrapper.auto;\n    } else {\n      fallbackFn = isHttps ? https.request : http.request;\n    }\n\n    const realFn = (_a = options.request) !== null && _a !== void 0 ? _a : fallbackFn; // Cache support\n\n    const fn = options.cache ? this._createCacheableRequest : realFn; // Pass an agent directly when HTTP2 is disabled\n\n    if (agent && !options.http2) {\n      options.agent = agent[isHttps ? 'https' : 'http'];\n    } // Prepare plain HTTP request options\n\n\n    options[kRequest] = realFn;\n    delete options.request;\n    delete options.timeout;\n    const requestOptions = options; // If `dnsLookupIpVersion` is not present do not override `family`\n\n    if (options.dnsLookupIpVersion !== undefined) {\n      try {\n        requestOptions.family = dns_ip_version_1.dnsLookupIpVersionToFamily(options.dnsLookupIpVersion);\n      } catch (_b) {\n        throw new Error('Invalid `dnsLookupIpVersion` option value');\n      }\n    } // HTTPS options remapping\n\n\n    if (options.https) {\n      if ('rejectUnauthorized' in options.https) {\n        requestOptions.rejectUnauthorized = options.https.rejectUnauthorized;\n      }\n\n      if (options.https.checkServerIdentity) {\n        requestOptions.checkServerIdentity = options.https.checkServerIdentity;\n      }\n\n      if (options.https.certificateAuthority) {\n        requestOptions.ca = options.https.certificateAuthority;\n      }\n\n      if (options.https.certificate) {\n        requestOptions.cert = options.https.certificate;\n      }\n\n      if (options.https.key) {\n        requestOptions.key = options.https.key;\n      }\n\n      if (options.https.passphrase) {\n        requestOptions.passphrase = options.https.passphrase;\n      }\n    }\n\n    try {\n      let requestOrResponse = await fn(url, requestOptions);\n\n      if (is_1.default.undefined(requestOrResponse)) {\n        requestOrResponse = fallbackFn(url, requestOptions);\n      } // Restore options\n\n\n      options.request = request;\n      options.timeout = timeout;\n      options.agent = agent;\n\n      if (isClientRequest(requestOrResponse)) {\n        this._onRequest(requestOrResponse); // Emit the response after the stream has been ended\n\n      } else if (this.writable) {\n        this.once('finish', () => {\n          void this._onResponse(requestOrResponse);\n        });\n\n        this._unlockWrite();\n\n        this.end();\n\n        this._lockWrite();\n      } else {\n        void this._onResponse(requestOrResponse);\n      }\n    } catch (error) {\n      if (error instanceof CacheableRequest.CacheError) {\n        throw new CacheError(error, this);\n      }\n\n      throw new RequestError(error.message, error, this);\n    }\n  }\n\n  _beforeError(error) {\n    if (this.destroyed) {\n      return;\n    }\n\n    this[kStopReading] = true;\n\n    if (!(error instanceof RequestError)) {\n      error = new RequestError(error.message, error, this);\n    }\n\n    void (async () => {\n      try {\n        const {\n          response\n        } = error;\n\n        if (response) {\n          response.setEncoding(this._readableState.encoding);\n          response.rawBody = await get_buffer_1.default(response);\n          response.body = response.rawBody.toString();\n        }\n      } catch (_a) {}\n\n      try {\n        for (const hook of this.options.hooks.beforeError) {\n          // eslint-disable-next-line no-await-in-loop\n          error = await hook(error);\n        }\n      } catch (error_) {\n        error = new RequestError(error_.message, error_, this);\n      }\n\n      this.destroy(error);\n    })();\n  }\n\n  _read() {\n    this[kTriggerRead] = true;\n    const response = this[kResponse];\n\n    if (response && !this[kStopReading]) {\n      // We cannot put this in the `if` above\n      // because `.read()` also triggers the `end` event\n      if (response.readableLength) {\n        this[kTriggerRead] = false;\n      }\n\n      let data;\n\n      while ((data = response.read()) !== null) {\n        this[kDownloadedSize] += data.length;\n        this[kStartedReading] = true;\n        const progress = this.downloadProgress;\n\n        if (progress.percent < 1) {\n          this.emit('downloadProgress', progress);\n        }\n\n        this.push(data);\n      }\n    }\n  } // Node.js 12 has incorrect types, so the encoding must be a string\n\n\n  _write(chunk, encoding, callback) {\n    const write = () => {\n      this._writeRequest(chunk, encoding, callback);\n    };\n\n    if (this.requestInitialized) {\n      write();\n    } else {\n      this[kJobs].push(write);\n    }\n  }\n\n  _writeRequest(chunk, encoding, callback) {\n    this._progressCallbacks.push(() => {\n      this[kUploadedSize] += Buffer.byteLength(chunk, encoding);\n      const progress = this.uploadProgress;\n\n      if (progress.percent < 1) {\n        this.emit('uploadProgress', progress);\n      }\n    }); // TODO: What happens if it's from cache? Then this[kRequest] won't be defined.\n\n\n    this[kRequest].write(chunk, encoding, error => {\n      if (!error && this._progressCallbacks.length !== 0) {\n        this._progressCallbacks.shift()();\n      }\n\n      callback(error);\n    });\n  }\n\n  _final(callback) {\n    const endRequest = () => {\n      // FIX: Node.js 10 calls the write callback AFTER the end callback!\n      while (this._progressCallbacks.length !== 0) {\n        this._progressCallbacks.shift()();\n      } // We need to check if `this[kRequest]` is present,\n      // because it isn't when we use cache.\n\n\n      if (!(kRequest in this)) {\n        callback();\n        return;\n      }\n\n      if (this[kRequest].destroyed) {\n        callback();\n        return;\n      }\n\n      this[kRequest].end(error => {\n        if (!error) {\n          this[kBodySize] = this[kUploadedSize];\n          this.emit('uploadProgress', this.uploadProgress);\n          this[kRequest].emit('upload-complete');\n        }\n\n        callback(error);\n      });\n    };\n\n    if (this.requestInitialized) {\n      endRequest();\n    } else {\n      this[kJobs].push(endRequest);\n    }\n  }\n\n  _destroy(error, callback) {\n    var _a;\n\n    this[kStopReading] = true;\n\n    if (kRequest in this) {\n      this[kCancelTimeouts](); // TODO: Remove the next `if` when these get fixed:\n      // - https://github.com/nodejs/node/issues/32851\n\n      if (!((_a = this[kResponse]) === null || _a === void 0 ? void 0 : _a.complete)) {\n        this[kRequest].destroy();\n      }\n    }\n\n    if (error !== null && !is_1.default.undefined(error) && !(error instanceof RequestError)) {\n      error = new RequestError(error.message, error, this);\n    }\n\n    callback(error);\n  }\n\n  get ip() {\n    var _a;\n\n    return (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.socket.remoteAddress;\n  }\n\n  get aborted() {\n    var _a, _b, _c;\n\n    return ((_b = (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.destroyed) !== null && _b !== void 0 ? _b : this.destroyed) && !((_c = this[kOriginalResponse]) === null || _c === void 0 ? void 0 : _c.complete);\n  }\n\n  get socket() {\n    var _a;\n\n    return (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.socket;\n  }\n\n  get downloadProgress() {\n    let percent;\n\n    if (this[kResponseSize]) {\n      percent = this[kDownloadedSize] / this[kResponseSize];\n    } else if (this[kResponseSize] === this[kDownloadedSize]) {\n      percent = 1;\n    } else {\n      percent = 0;\n    }\n\n    return {\n      percent,\n      transferred: this[kDownloadedSize],\n      total: this[kResponseSize]\n    };\n  }\n\n  get uploadProgress() {\n    let percent;\n\n    if (this[kBodySize]) {\n      percent = this[kUploadedSize] / this[kBodySize];\n    } else if (this[kBodySize] === this[kUploadedSize]) {\n      percent = 1;\n    } else {\n      percent = 0;\n    }\n\n    return {\n      percent,\n      transferred: this[kUploadedSize],\n      total: this[kBodySize]\n    };\n  }\n\n  get timings() {\n    var _a;\n\n    return (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.timings;\n  }\n\n  get isFromCache() {\n    return this[kIsFromCache];\n  }\n\n  get _response() {\n    return this[kResponse];\n  }\n\n  pipe(destination, options) {\n    if (this[kStartedReading]) {\n      throw new Error('Failed to pipe. The response has been emitted already.');\n    }\n\n    if (destination instanceof http_1.ServerResponse) {\n      this[kServerResponsesPiped].add(destination);\n    }\n\n    return super.pipe(destination, options);\n  }\n\n  unpipe(destination) {\n    if (destination instanceof http_1.ServerResponse) {\n      this[kServerResponsesPiped].delete(destination);\n    }\n\n    super.unpipe(destination);\n    return this;\n  }\n\n}\n\nexports.default = Request;","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/got/dist/source/core/index.js"],"names":["Object","defineProperty","exports","value","UnsupportedProtocolError","ReadError","TimeoutError","UploadError","CacheError","HTTPError","MaxRedirectsError","RequestError","setNonEnumerableProperties","knownHookEvents","withoutBody","kIsNormalizedAlready","util_1","require","stream_1","fs_1","url_1","http","http_1","https","http_timer_1","cacheable_lookup_1","CacheableRequest","decompressResponse","http2wrapper","lowercaseKeys","is_1","get_body_size_1","is_form_data_1","proxy_events_1","timed_out_1","url_to_options_1","options_to_url_1","weakable_map_1","get_buffer_1","dns_ip_version_1","deprecation_warning_1","kRequest","Symbol","kResponse","kResponseSize","kDownloadedSize","kBodySize","kUploadedSize","kServerResponsesPiped","kUnproxyEvents","kIsFromCache","kCancelTimeouts","kStartedReading","kStopReading","kTriggerRead","kBody","kJobs","kOriginalResponse","supportsBrotli","default","string","process","versions","brotli","Set","validateSearchParameters","searchParameters","key","number","boolean","null_","undefined","TypeError","String","isClientRequest","clientRequest","object","cacheableStore","waitForOpenFile","file","Promise","resolve","reject","onError","error","pending","once","off","redirectCodes","nonEnumerableProperties","sources","to","properties","source","name","writable","configurable","enumerable","defineProperties","Error","constructor","message","self","_a","captureStackTrace","code","Request","options","timings","request","stack","indexOfMessage","indexOf","length","thisStackTrace","slice","split","reverse","errorStackTrace","shift","join","maxRedirects","response","statusCode","statusMessage","event","url","protocol","proxiedRequestEvents","Duplex","defaults","highWaterMark","requestInitialized","redirects","_progressCallbacks","unlockWrite","_unlockWrite","lockWrite","_lockWrite","on","prependListener","IncomingMessage","headers","json","body","form","nonNormalizedOptions","ReadStream","normalizeArguments","normalizedURL","requestUrl","toString","decodeURI","_finalizeBody","_makeRequest","destroyed","destroy","job","_beforeError","_b","_c","_d","rawOptions","urlInstance","URL","cache","dnsCache","assert","any","method","prefixUrl","cookieJar","searchParams","timeout","context","hooks","decompress","ignoreInvalidCookies","followRedirect","throwHttpErrors","http2","allowGetBody","localAddress","isDnsLookupIpVersion","dnsLookupIpVersion","rejectUnauthorized","function_","checkServerIdentity","array","certificateAuthority","certificate","passphrase","toUpperCase","URLSearchParams","append","forEach","has","username","password","endsWith","startsWith","set","href","get","pathname","search","setCookie","getCookieString","promisify","bind","requestOptions","handler","result","promise","catch","lookup","areHooksDefault","defaultHooks","agent","onLockedWrite","write","end","isForm","isJSON","isBody","hasPayload","cannotHaveBody","_cannotHaveBody","filter","isTrue","Readable","buffer","noContentType","getBoundary","stringifyJson","uploadBodySize","Number","_onResponseBase","typedResponse","STATUS_CODES","redirectUrls","isFromCache","fromCache","ip","emit","downloadProgress","rawCookies","promises","map","rawCookie","p","all","location","resume","shouldBeGet","methodRewriting","redirectBuffer","Buffer","from","redirectUrl","redirectString","hostname","host","cookie","authorization","push","hook","beforeRedirect","limitStatusCode","isOk","_read","pause","destination","headersSent","isAllowed","setHeader","_onResponse","_onRequest","responseEventName","res","removeAllListeners","uploadProgress","currentRequest","nodeStream","pipe","_writeRequest","_noPipe","_createCacheableRequest","assign","cacheRequest","_readableState","autoDestroy","requestOrPromise","cookieString","nonEmptyString","beforeRequest","matches","exec","groups","socketPath","path","isHttps","fallbackFn","auto","realFn","fn","family","dnsLookupIpVersionToFamily","ca","cert","requestOrResponse","setEncoding","encoding","rawBody","beforeError","error_","readableLength","data","read","progress","percent","_write","chunk","callback","byteLength","_final","endRequest","_destroy","complete","socket","remoteAddress","aborted","transferred","total","_response","ServerResponse","add","unpipe","delete"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UnsupportedProtocolError = exports.ReadError = exports.TimeoutError = exports.UploadError = exports.CacheError = exports.HTTPError = exports.MaxRedirectsError = exports.RequestError = exports.setNonEnumerableProperties = exports.knownHookEvents = exports.withoutBody = exports.kIsNormalizedAlready = void 0;\nconst util_1 = require(\"util\");\nconst stream_1 = require(\"stream\");\nconst fs_1 = require(\"fs\");\nconst url_1 = require(\"url\");\nconst http = require(\"http\");\nconst http_1 = require(\"http\");\nconst https = require(\"https\");\nconst http_timer_1 = require(\"@szmarczak/http-timer\");\nconst cacheable_lookup_1 = require(\"cacheable-lookup\");\nconst CacheableRequest = require(\"cacheable-request\");\nconst decompressResponse = require(\"decompress-response\");\n// @ts-expect-error Missing types\nconst http2wrapper = require(\"http2-wrapper\");\nconst lowercaseKeys = require(\"lowercase-keys\");\nconst is_1 = require(\"@sindresorhus/is\");\nconst get_body_size_1 = require(\"./utils/get-body-size\");\nconst is_form_data_1 = require(\"./utils/is-form-data\");\nconst proxy_events_1 = require(\"./utils/proxy-events\");\nconst timed_out_1 = require(\"./utils/timed-out\");\nconst url_to_options_1 = require(\"./utils/url-to-options\");\nconst options_to_url_1 = require(\"./utils/options-to-url\");\nconst weakable_map_1 = require(\"./utils/weakable-map\");\nconst get_buffer_1 = require(\"./utils/get-buffer\");\nconst dns_ip_version_1 = require(\"./utils/dns-ip-version\");\nconst deprecation_warning_1 = require(\"../utils/deprecation-warning\");\nconst kRequest = Symbol('request');\nconst kResponse = Symbol('response');\nconst kResponseSize = Symbol('responseSize');\nconst kDownloadedSize = Symbol('downloadedSize');\nconst kBodySize = Symbol('bodySize');\nconst kUploadedSize = Symbol('uploadedSize');\nconst kServerResponsesPiped = Symbol('serverResponsesPiped');\nconst kUnproxyEvents = Symbol('unproxyEvents');\nconst kIsFromCache = Symbol('isFromCache');\nconst kCancelTimeouts = Symbol('cancelTimeouts');\nconst kStartedReading = Symbol('startedReading');\nconst kStopReading = Symbol('stopReading');\nconst kTriggerRead = Symbol('triggerRead');\nconst kBody = Symbol('body');\nconst kJobs = Symbol('jobs');\nconst kOriginalResponse = Symbol('originalResponse');\nexports.kIsNormalizedAlready = Symbol('isNormalizedAlready');\nconst supportsBrotli = is_1.default.string(process.versions.brotli);\nexports.withoutBody = new Set(['GET', 'HEAD']);\nexports.knownHookEvents = ['init', 'beforeRequest', 'beforeRedirect', 'beforeError'];\nfunction validateSearchParameters(searchParameters) {\n    // eslint-disable-next-line guard-for-in\n    for (const key in searchParameters) {\n        const value = searchParameters[key];\n        if (!is_1.default.string(value) && !is_1.default.number(value) && !is_1.default.boolean(value) && !is_1.default.null_(value) && !is_1.default.undefined(value)) {\n            throw new TypeError(`The \\`searchParams\\` value '${String(value)}' must be a string, number, boolean or null`);\n        }\n    }\n}\nfunction isClientRequest(clientRequest) {\n    return is_1.default.object(clientRequest) && !('statusCode' in clientRequest);\n}\nconst cacheableStore = new weakable_map_1.default();\nconst waitForOpenFile = async (file) => new Promise((resolve, reject) => {\n    const onError = (error) => {\n        reject(error);\n    };\n    // Node.js 12 has incomplete types\n    if (!file.pending) {\n        resolve();\n    }\n    file.once('error', onError);\n    file.once('ready', () => {\n        file.off('error', onError);\n        resolve();\n    });\n});\nconst redirectCodes = new Set([300, 301, 302, 303, 304, 307, 308]);\nconst nonEnumerableProperties = [\n    'context',\n    'body',\n    'json',\n    'form'\n];\nexports.setNonEnumerableProperties = (sources, to) => {\n    // Non enumerable properties shall not be merged\n    const properties = {};\n    for (const source of sources) {\n        if (!source) {\n            continue;\n        }\n        for (const name of nonEnumerableProperties) {\n            if (!(name in source)) {\n                continue;\n            }\n            properties[name] = {\n                writable: true,\n                configurable: true,\n                enumerable: false,\n                // @ts-expect-error TS doesn't see the check above\n                value: source[name]\n            };\n        }\n    }\n    Object.defineProperties(to, properties);\n};\nclass RequestError extends Error {\n    constructor(message, error, self) {\n        var _a;\n        super(message);\n        Error.captureStackTrace(this, this.constructor);\n        this.name = 'RequestError';\n        this.code = error.code;\n        if (self instanceof Request) {\n            Object.defineProperty(this, 'request', {\n                enumerable: false,\n                value: self\n            });\n            Object.defineProperty(this, 'response', {\n                enumerable: false,\n                value: self[kResponse]\n            });\n            Object.defineProperty(this, 'options', {\n                // This fails because of TS 3.7.2 useDefineForClassFields\n                // Ref: https://github.com/microsoft/TypeScript/issues/34972\n                enumerable: false,\n                value: self.options\n            });\n        }\n        else {\n            Object.defineProperty(this, 'options', {\n                // This fails because of TS 3.7.2 useDefineForClassFields\n                // Ref: https://github.com/microsoft/TypeScript/issues/34972\n                enumerable: false,\n                value: self\n            });\n        }\n        this.timings = (_a = this.request) === null || _a === void 0 ? void 0 : _a.timings;\n        // Recover the original stacktrace\n        if (!is_1.default.undefined(error.stack)) {\n            const indexOfMessage = this.stack.indexOf(this.message) + this.message.length;\n            const thisStackTrace = this.stack.slice(indexOfMessage).split('\\n').reverse();\n            const errorStackTrace = error.stack.slice(error.stack.indexOf(error.message) + error.message.length).split('\\n').reverse();\n            // Remove duplicated traces\n            while (errorStackTrace.length !== 0 && errorStackTrace[0] === thisStackTrace[0]) {\n                thisStackTrace.shift();\n            }\n            this.stack = `${this.stack.slice(0, indexOfMessage)}${thisStackTrace.reverse().join('\\n')}${errorStackTrace.reverse().join('\\n')}`;\n        }\n    }\n}\nexports.RequestError = RequestError;\nclass MaxRedirectsError extends RequestError {\n    constructor(request) {\n        super(`Redirected ${request.options.maxRedirects} times. Aborting.`, {}, request);\n        this.name = 'MaxRedirectsError';\n    }\n}\nexports.MaxRedirectsError = MaxRedirectsError;\nclass HTTPError extends RequestError {\n    constructor(response) {\n        super(`Response code ${response.statusCode} (${response.statusMessage})`, {}, response.request);\n        this.name = 'HTTPError';\n    }\n}\nexports.HTTPError = HTTPError;\nclass CacheError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'CacheError';\n    }\n}\nexports.CacheError = CacheError;\nclass UploadError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'UploadError';\n    }\n}\nexports.UploadError = UploadError;\nclass TimeoutError extends RequestError {\n    constructor(error, timings, request) {\n        super(error.message, error, request);\n        this.name = 'TimeoutError';\n        this.event = error.event;\n        this.timings = timings;\n    }\n}\nexports.TimeoutError = TimeoutError;\nclass ReadError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'ReadError';\n    }\n}\nexports.ReadError = ReadError;\nclass UnsupportedProtocolError extends RequestError {\n    constructor(options) {\n        super(`Unsupported protocol \"${options.url.protocol}\"`, {}, options);\n        this.name = 'UnsupportedProtocolError';\n    }\n}\nexports.UnsupportedProtocolError = UnsupportedProtocolError;\nconst proxiedRequestEvents = [\n    'socket',\n    'connect',\n    'continue',\n    'information',\n    'upgrade',\n    'timeout'\n];\nclass Request extends stream_1.Duplex {\n    constructor(url, options = {}, defaults) {\n        super({\n            // It needs to be zero because we're just proxying the data to another stream\n            highWaterMark: 0\n        });\n        this[kDownloadedSize] = 0;\n        this[kUploadedSize] = 0;\n        this.requestInitialized = false;\n        this[kServerResponsesPiped] = new Set();\n        this.redirects = [];\n        this[kStopReading] = false;\n        this[kTriggerRead] = false;\n        this[kJobs] = [];\n        // TODO: Remove this when targeting Node.js >= 12\n        this._progressCallbacks = [];\n        const unlockWrite = () => this._unlockWrite();\n        const lockWrite = () => this._lockWrite();\n        this.on('pipe', (source) => {\n            source.prependListener('data', unlockWrite);\n            source.on('data', lockWrite);\n            source.prependListener('end', unlockWrite);\n            source.on('end', lockWrite);\n        });\n        this.on('unpipe', (source) => {\n            source.off('data', unlockWrite);\n            source.off('data', lockWrite);\n            source.off('end', unlockWrite);\n            source.off('end', lockWrite);\n        });\n        this.on('pipe', source => {\n            if (source instanceof http_1.IncomingMessage) {\n                this.options.headers = {\n                    ...source.headers,\n                    ...this.options.headers\n                };\n            }\n        });\n        const { json, body, form } = options;\n        if (json || body || form) {\n            this._lockWrite();\n        }\n        (async (nonNormalizedOptions) => {\n            var _a;\n            try {\n                if (nonNormalizedOptions.body instanceof fs_1.ReadStream) {\n                    await waitForOpenFile(nonNormalizedOptions.body);\n                }\n                if (exports.kIsNormalizedAlready in nonNormalizedOptions) {\n                    this.options = nonNormalizedOptions;\n                }\n                else {\n                    // @ts-expect-error Common TypeScript bug saying that `this.constructor` is not accessible\n                    this.options = this.constructor.normalizeArguments(url, nonNormalizedOptions, defaults);\n                }\n                const { url: normalizedURL } = this.options;\n                if (!normalizedURL) {\n                    throw new TypeError('Missing `url` property');\n                }\n                this.requestUrl = normalizedURL.toString();\n                decodeURI(this.requestUrl);\n                await this._finalizeBody();\n                await this._makeRequest();\n                if (this.destroyed) {\n                    (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.destroy();\n                    return;\n                }\n                // Queued writes etc.\n                for (const job of this[kJobs]) {\n                    job();\n                }\n                this.requestInitialized = true;\n            }\n            catch (error) {\n                if (error instanceof RequestError) {\n                    this._beforeError(error);\n                    return;\n                }\n                // This is a workaround for https://github.com/nodejs/node/issues/33335\n                if (!this.destroyed) {\n                    this.destroy(error);\n                }\n            }\n        })(options);\n    }\n    static normalizeArguments(url, options, defaults) {\n        var _a, _b, _c, _d;\n        const rawOptions = options;\n        if (is_1.default.object(url) && !is_1.default.urlInstance(url)) {\n            options = { ...defaults, ...url, ...options };\n        }\n        else {\n            if (url && options && options.url !== undefined) {\n                throw new TypeError('The `url` option is mutually exclusive with the `input` argument');\n            }\n            options = { ...defaults, ...options };\n            if (url !== undefined) {\n                options.url = url;\n            }\n            if (is_1.default.urlInstance(options.url)) {\n                options.url = new url_1.URL(options.url.toString());\n            }\n        }\n        // TODO: Deprecate URL options in Got 12.\n        // Support extend-specific options\n        if (options.cache === false) {\n            options.cache = undefined;\n        }\n        if (options.dnsCache === false) {\n            options.dnsCache = undefined;\n        }\n        // Nice type assertions\n        is_1.assert.any([is_1.default.string, is_1.default.undefined], options.method);\n        is_1.assert.any([is_1.default.object, is_1.default.undefined], options.headers);\n        is_1.assert.any([is_1.default.string, is_1.default.urlInstance, is_1.default.undefined], options.prefixUrl);\n        is_1.assert.any([is_1.default.object, is_1.default.undefined], options.cookieJar);\n        is_1.assert.any([is_1.default.object, is_1.default.string, is_1.default.undefined], options.searchParams);\n        is_1.assert.any([is_1.default.object, is_1.default.string, is_1.default.undefined], options.cache);\n        is_1.assert.any([is_1.default.object, is_1.default.number, is_1.default.undefined], options.timeout);\n        is_1.assert.any([is_1.default.object, is_1.default.undefined], options.context);\n        is_1.assert.any([is_1.default.object, is_1.default.undefined], options.hooks);\n        is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.decompress);\n        is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.ignoreInvalidCookies);\n        is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.followRedirect);\n        is_1.assert.any([is_1.default.number, is_1.default.undefined], options.maxRedirects);\n        is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.throwHttpErrors);\n        is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.http2);\n        is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.allowGetBody);\n        is_1.assert.any([is_1.default.string, is_1.default.undefined], options.localAddress);\n        is_1.assert.any([dns_ip_version_1.isDnsLookupIpVersion, is_1.default.undefined], options.dnsLookupIpVersion);\n        is_1.assert.any([is_1.default.object, is_1.default.undefined], options.https);\n        is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.rejectUnauthorized);\n        if (options.https) {\n            is_1.assert.any([is_1.default.boolean, is_1.default.undefined], options.https.rejectUnauthorized);\n            is_1.assert.any([is_1.default.function_, is_1.default.undefined], options.https.checkServerIdentity);\n            is_1.assert.any([is_1.default.string, is_1.default.object, is_1.default.array, is_1.default.undefined], options.https.certificateAuthority);\n            is_1.assert.any([is_1.default.string, is_1.default.object, is_1.default.array, is_1.default.undefined], options.https.key);\n            is_1.assert.any([is_1.default.string, is_1.default.object, is_1.default.array, is_1.default.undefined], options.https.certificate);\n            is_1.assert.any([is_1.default.string, is_1.default.undefined], options.https.passphrase);\n        }\n        // `options.method`\n        if (is_1.default.string(options.method)) {\n            options.method = options.method.toUpperCase();\n        }\n        else {\n            options.method = 'GET';\n        }\n        // `options.headers`\n        if (options.headers === (defaults === null || defaults === void 0 ? void 0 : defaults.headers)) {\n            options.headers = { ...options.headers };\n        }\n        else {\n            options.headers = lowercaseKeys({ ...(defaults === null || defaults === void 0 ? void 0 : defaults.headers), ...options.headers });\n        }\n        // Disallow legacy `url.Url`\n        if ('slashes' in options) {\n            throw new TypeError('The legacy `url.Url` has been deprecated. Use `URL` instead.');\n        }\n        // `options.auth`\n        if ('auth' in options) {\n            throw new TypeError('Parameter `auth` is deprecated. Use `username` / `password` instead.');\n        }\n        // `options.searchParams`\n        if ('searchParams' in options) {\n            if (options.searchParams && options.searchParams !== (defaults === null || defaults === void 0 ? void 0 : defaults.searchParams)) {\n                let searchParameters;\n                if (is_1.default.string(options.searchParams) || (options.searchParams instanceof url_1.URLSearchParams)) {\n                    searchParameters = new url_1.URLSearchParams(options.searchParams);\n                }\n                else {\n                    validateSearchParameters(options.searchParams);\n                    searchParameters = new url_1.URLSearchParams();\n                    // eslint-disable-next-line guard-for-in\n                    for (const key in options.searchParams) {\n                        const value = options.searchParams[key];\n                        if (value === null) {\n                            searchParameters.append(key, '');\n                        }\n                        else if (value !== undefined) {\n                            searchParameters.append(key, value);\n                        }\n                    }\n                }\n                // `normalizeArguments()` is also used to merge options\n                (_a = defaults === null || defaults === void 0 ? void 0 : defaults.searchParams) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => {\n                    // Only use default if one isn't already defined\n                    if (!searchParameters.has(key)) {\n                        searchParameters.append(key, value);\n                    }\n                });\n                options.searchParams = searchParameters;\n            }\n        }\n        // `options.username` & `options.password`\n        options.username = (_b = options.username) !== null && _b !== void 0 ? _b : '';\n        options.password = (_c = options.password) !== null && _c !== void 0 ? _c : '';\n        // `options.prefixUrl` & `options.url`\n        if (options.prefixUrl) {\n            options.prefixUrl = options.prefixUrl.toString();\n            if (options.prefixUrl !== '' && !options.prefixUrl.endsWith('/')) {\n                options.prefixUrl += '/';\n            }\n        }\n        else {\n            options.prefixUrl = '';\n        }\n        if (is_1.default.string(options.url)) {\n            if (options.url.startsWith('/')) {\n                throw new Error('`input` must not start with a slash when using `prefixUrl`');\n            }\n            options.url = options_to_url_1.default(options.prefixUrl + options.url, options);\n        }\n        else if ((is_1.default.undefined(options.url) && options.prefixUrl !== '') || options.protocol) {\n            options.url = options_to_url_1.default(options.prefixUrl, options);\n        }\n        if (options.url) {\n            // Make it possible to change `options.prefixUrl`\n            let { prefixUrl } = options;\n            Object.defineProperty(options, 'prefixUrl', {\n                set: (value) => {\n                    const url = options.url;\n                    if (!url.href.startsWith(value)) {\n                        throw new Error(`Cannot change \\`prefixUrl\\` from ${prefixUrl} to ${value}: ${url.href}`);\n                    }\n                    options.url = new url_1.URL(value + url.href.slice(prefixUrl.length));\n                    prefixUrl = value;\n                },\n                get: () => prefixUrl\n            });\n            // Support UNIX sockets\n            let { protocol } = options.url;\n            if (protocol === 'unix:') {\n                protocol = 'http:';\n                options.url = new url_1.URL(`http://unix${options.url.pathname}${options.url.search}`);\n            }\n            // Set search params\n            if (options.searchParams) {\n                // eslint-disable-next-line @typescript-eslint/no-base-to-string\n                options.url.search = options.searchParams.toString();\n            }\n            // Protocol check\n            if (protocol !== 'http:' && protocol !== 'https:') {\n                throw new UnsupportedProtocolError(options);\n            }\n            // Update `username`\n            if (options.username === '') {\n                options.username = options.url.username;\n            }\n            else {\n                options.url.username = options.username;\n            }\n            // Update `password`\n            if (options.password === '') {\n                options.password = options.url.password;\n            }\n            else {\n                options.url.password = options.password;\n            }\n        }\n        // `options.cookieJar`\n        const { cookieJar } = options;\n        if (cookieJar) {\n            let { setCookie, getCookieString } = cookieJar;\n            is_1.assert.function_(setCookie);\n            is_1.assert.function_(getCookieString);\n            /* istanbul ignore next: Horrible `tough-cookie` v3 check */\n            if (setCookie.length === 4 && getCookieString.length === 0) {\n                setCookie = util_1.promisify(setCookie.bind(options.cookieJar));\n                getCookieString = util_1.promisify(getCookieString.bind(options.cookieJar));\n                options.cookieJar = {\n                    setCookie,\n                    // TODO: Fix this when upgrading to TypeScript 4.\n                    // @ts-expect-error TypeScript thinks that promisifying callback(error, string) will result in Promise<void>\n                    getCookieString\n                };\n            }\n        }\n        // `options.cache`\n        const { cache } = options;\n        if (cache) {\n            if (!cacheableStore.has(cache)) {\n                cacheableStore.set(cache, new CacheableRequest(((requestOptions, handler) => {\n                    const result = requestOptions[kRequest](requestOptions, handler);\n                    // TODO: remove this when `cacheable-request` supports async request functions.\n                    if (is_1.default.promise(result)) {\n                        // @ts-expect-error\n                        // We only need to implement the error handler in order to support HTTP2 caching.\n                        // The result will be a promise anyway.\n                        result.once = (event, handler) => {\n                            if (event === 'error') {\n                                result.catch(handler);\n                            }\n                            else if (event === 'abort') {\n                                // The empty catch is needed here in case when\n                                // it rejects before it's `await`ed in `_makeRequest`.\n                                (async () => {\n                                    try {\n                                        const request = (await result);\n                                        request.once('abort', handler);\n                                    }\n                                    catch (_a) { }\n                                })();\n                            }\n                            else {\n                                /* istanbul ignore next: safety check */\n                                throw new Error(`Unknown HTTP2 promise event: ${event}`);\n                            }\n                            return result;\n                        };\n                    }\n                    return result;\n                }), cache));\n            }\n        }\n        // `options.dnsCache`\n        if (options.dnsCache === true) {\n            options.dnsCache = new cacheable_lookup_1.default();\n        }\n        else if (!is_1.default.undefined(options.dnsCache) && !options.dnsCache.lookup) {\n            throw new TypeError(`Parameter \\`dnsCache\\` must be a CacheableLookup instance or a boolean, got ${is_1.default(options.dnsCache)}`);\n        }\n        // `options.timeout`\n        if (is_1.default.number(options.timeout)) {\n            options.timeout = { request: options.timeout };\n        }\n        else if (defaults && options.timeout !== defaults.timeout) {\n            options.timeout = {\n                ...defaults.timeout,\n                ...options.timeout\n            };\n        }\n        else {\n            options.timeout = { ...options.timeout };\n        }\n        // `options.context`\n        if (!options.context) {\n            options.context = {};\n        }\n        // `options.hooks`\n        const areHooksDefault = options.hooks === (defaults === null || defaults === void 0 ? void 0 : defaults.hooks);\n        options.hooks = { ...options.hooks };\n        for (const event of exports.knownHookEvents) {\n            if (event in options.hooks) {\n                if (is_1.default.array(options.hooks[event])) {\n                    // See https://github.com/microsoft/TypeScript/issues/31445#issuecomment-576929044\n                    options.hooks[event] = [...options.hooks[event]];\n                }\n                else {\n                    throw new TypeError(`Parameter \\`${event}\\` must be an Array, got ${is_1.default(options.hooks[event])}`);\n                }\n            }\n            else {\n                options.hooks[event] = [];\n            }\n        }\n        if (defaults && !areHooksDefault) {\n            for (const event of exports.knownHookEvents) {\n                const defaultHooks = defaults.hooks[event];\n                if (defaultHooks.length !== 0) {\n                    // See https://github.com/microsoft/TypeScript/issues/31445#issuecomment-576929044\n                    options.hooks[event] = [\n                        ...defaults.hooks[event],\n                        ...options.hooks[event]\n                    ];\n                }\n            }\n        }\n        // DNS options\n        if ('family' in options) {\n            deprecation_warning_1.default('\"options.family\" was never documented, please use \"options.dnsLookupIpVersion\"');\n        }\n        // HTTPS options\n        if (defaults === null || defaults === void 0 ? void 0 : defaults.https) {\n            options.https = { ...defaults.https, ...options.https };\n        }\n        if ('rejectUnauthorized' in options) {\n            deprecation_warning_1.default('\"options.rejectUnauthorized\" is now deprecated, please use \"options.https.rejectUnauthorized\"');\n        }\n        if ('checkServerIdentity' in options) {\n            deprecation_warning_1.default('\"options.checkServerIdentity\" was never documented, please use \"options.https.checkServerIdentity\"');\n        }\n        if ('ca' in options) {\n            deprecation_warning_1.default('\"options.ca\" was never documented, please use \"options.https.certificateAuthority\"');\n        }\n        if ('key' in options) {\n            deprecation_warning_1.default('\"options.key\" was never documented, please use \"options.https.key\"');\n        }\n        if ('cert' in options) {\n            deprecation_warning_1.default('\"options.cert\" was never documented, please use \"options.https.certificate\"');\n        }\n        if ('passphrase' in options) {\n            deprecation_warning_1.default('\"options.passphrase\" was never documented, please use \"options.https.passphrase\"');\n        }\n        // Other options\n        if ('followRedirects' in options) {\n            throw new TypeError('The `followRedirects` option does not exist. Use `followRedirect` instead.');\n        }\n        if (options.agent) {\n            for (const key in options.agent) {\n                if (key !== 'http' && key !== 'https' && key !== 'http2') {\n                    throw new TypeError(`Expected the \\`options.agent\\` properties to be \\`http\\`, \\`https\\` or \\`http2\\`, got \\`${key}\\``);\n                }\n            }\n        }\n        options.maxRedirects = (_d = options.maxRedirects) !== null && _d !== void 0 ? _d : 0;\n        // Set non-enumerable properties\n        exports.setNonEnumerableProperties([defaults, rawOptions], options);\n        return options;\n    }\n    _lockWrite() {\n        const onLockedWrite = () => {\n            throw new TypeError('The payload has been already provided');\n        };\n        this.write = onLockedWrite;\n        this.end = onLockedWrite;\n    }\n    _unlockWrite() {\n        this.write = super.write;\n        this.end = super.end;\n    }\n    async _finalizeBody() {\n        const { options } = this;\n        const { headers } = options;\n        const isForm = !is_1.default.undefined(options.form);\n        const isJSON = !is_1.default.undefined(options.json);\n        const isBody = !is_1.default.undefined(options.body);\n        const hasPayload = isForm || isJSON || isBody;\n        const cannotHaveBody = exports.withoutBody.has(options.method) && !(options.method === 'GET' && options.allowGetBody);\n        this._cannotHaveBody = cannotHaveBody;\n        if (hasPayload) {\n            if (cannotHaveBody) {\n                throw new TypeError(`The \\`${options.method}\\` method cannot be used with a body`);\n            }\n            if ([isBody, isForm, isJSON].filter(isTrue => isTrue).length > 1) {\n                throw new TypeError('The `body`, `json` and `form` options are mutually exclusive');\n            }\n            if (isBody &&\n                !(options.body instanceof stream_1.Readable) &&\n                !is_1.default.string(options.body) &&\n                !is_1.default.buffer(options.body) &&\n                !is_form_data_1.default(options.body)) {\n                throw new TypeError('The `body` option must be a stream.Readable, string or Buffer');\n            }\n            if (isForm && !is_1.default.object(options.form)) {\n                throw new TypeError('The `form` option must be an Object');\n            }\n            {\n                // Serialize body\n                const noContentType = !is_1.default.string(headers['content-type']);\n                if (isBody) {\n                    // Special case for https://github.com/form-data/form-data\n                    if (is_form_data_1.default(options.body) && noContentType) {\n                        headers['content-type'] = `multipart/form-data; boundary=${options.body.getBoundary()}`;\n                    }\n                    this[kBody] = options.body;\n                }\n                else if (isForm) {\n                    if (noContentType) {\n                        headers['content-type'] = 'application/x-www-form-urlencoded';\n                    }\n                    this[kBody] = (new url_1.URLSearchParams(options.form)).toString();\n                }\n                else {\n                    if (noContentType) {\n                        headers['content-type'] = 'application/json';\n                    }\n                    this[kBody] = options.stringifyJson(options.json);\n                }\n                const uploadBodySize = await get_body_size_1.default(this[kBody], options.headers);\n                // See https://tools.ietf.org/html/rfc7230#section-3.3.2\n                // A user agent SHOULD send a Content-Length in a request message when\n                // no Transfer-Encoding is sent and the request method defines a meaning\n                // for an enclosed payload body.  For example, a Content-Length header\n                // field is normally sent in a POST request even when the value is 0\n                // (indicating an empty payload body).  A user agent SHOULD NOT send a\n                // Content-Length header field when the request message does not contain\n                // a payload body and the method semantics do not anticipate such a\n                // body.\n                if (is_1.default.undefined(headers['content-length']) && is_1.default.undefined(headers['transfer-encoding'])) {\n                    if (!cannotHaveBody && !is_1.default.undefined(uploadBodySize)) {\n                        headers['content-length'] = String(uploadBodySize);\n                    }\n                }\n            }\n        }\n        else if (cannotHaveBody) {\n            this._lockWrite();\n        }\n        else {\n            this._unlockWrite();\n        }\n        this[kBodySize] = Number(headers['content-length']) || undefined;\n    }\n    async _onResponseBase(response) {\n        const { options } = this;\n        const { url } = options;\n        this[kOriginalResponse] = response;\n        if (options.decompress) {\n            response = decompressResponse(response);\n        }\n        const statusCode = response.statusCode;\n        const typedResponse = response;\n        typedResponse.statusMessage = typedResponse.statusMessage ? typedResponse.statusMessage : http.STATUS_CODES[statusCode];\n        typedResponse.url = options.url.toString();\n        typedResponse.requestUrl = this.requestUrl;\n        typedResponse.redirectUrls = this.redirects;\n        typedResponse.request = this;\n        typedResponse.isFromCache = response.fromCache || false;\n        typedResponse.ip = this.ip;\n        this[kIsFromCache] = typedResponse.isFromCache;\n        this[kResponseSize] = Number(response.headers['content-length']) || undefined;\n        this[kResponse] = response;\n        response.once('end', () => {\n            this[kResponseSize] = this[kDownloadedSize];\n            this.emit('downloadProgress', this.downloadProgress);\n        });\n        response.once('error', (error) => {\n            // Force clean-up, because some packages don't do this.\n            // TODO: Fix decompress-response\n            response.destroy();\n            this._beforeError(new ReadError(error, this));\n        });\n        response.once('aborted', () => {\n            this._beforeError(new ReadError({\n                name: 'Error',\n                message: 'The server aborted pending request',\n                code: 'ECONNRESET'\n            }, this));\n        });\n        this.emit('downloadProgress', this.downloadProgress);\n        const rawCookies = response.headers['set-cookie'];\n        if (is_1.default.object(options.cookieJar) && rawCookies) {\n            let promises = rawCookies.map(async (rawCookie) => options.cookieJar.setCookie(rawCookie, url.toString()));\n            if (options.ignoreInvalidCookies) {\n                promises = promises.map(async (p) => p.catch(() => { }));\n            }\n            try {\n                await Promise.all(promises);\n            }\n            catch (error) {\n                this._beforeError(error);\n                return;\n            }\n        }\n        if (options.followRedirect && response.headers.location && redirectCodes.has(statusCode)) {\n            // We're being redirected, we don't care about the response.\n            // It'd be besto to abort the request, but we can't because\n            // we would have to sacrifice the TCP connection. We don't want that.\n            response.resume();\n            if (this[kRequest]) {\n                this[kCancelTimeouts]();\n                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n                delete this[kRequest];\n                this[kUnproxyEvents]();\n            }\n            const shouldBeGet = statusCode === 303 && options.method !== 'GET' && options.method !== 'HEAD';\n            if (shouldBeGet || !options.methodRewriting) {\n                // Server responded with \"see other\", indicating that the resource exists at another location,\n                // and the client should request it from that location via GET or HEAD.\n                options.method = 'GET';\n                if ('body' in options) {\n                    delete options.body;\n                }\n                if ('json' in options) {\n                    delete options.json;\n                }\n                if ('form' in options) {\n                    delete options.form;\n                }\n            }\n            if (this.redirects.length >= options.maxRedirects) {\n                this._beforeError(new MaxRedirectsError(this));\n                return;\n            }\n            try {\n                // Do not remove. See https://github.com/sindresorhus/got/pull/214\n                const redirectBuffer = Buffer.from(response.headers.location, 'binary').toString();\n                // Handles invalid URLs. See https://github.com/sindresorhus/got/issues/604\n                const redirectUrl = new url_1.URL(redirectBuffer, url);\n                const redirectString = redirectUrl.toString();\n                decodeURI(redirectString);\n                // Redirecting to a different site, clear sensitive data.\n                if (redirectUrl.hostname !== url.hostname) {\n                    if ('host' in options.headers) {\n                        delete options.headers.host;\n                    }\n                    if ('cookie' in options.headers) {\n                        delete options.headers.cookie;\n                    }\n                    if ('authorization' in options.headers) {\n                        delete options.headers.authorization;\n                    }\n                    if (options.username || options.password) {\n                        delete options.username;\n                        delete options.password;\n                    }\n                }\n                this.redirects.push(redirectString);\n                options.url = redirectUrl;\n                for (const hook of options.hooks.beforeRedirect) {\n                    // eslint-disable-next-line no-await-in-loop\n                    await hook(options, typedResponse);\n                }\n                this.emit('redirect', typedResponse, options);\n                await this._makeRequest();\n            }\n            catch (error) {\n                this._beforeError(error);\n                return;\n            }\n            return;\n        }\n        const limitStatusCode = options.followRedirect ? 299 : 399;\n        const isOk = (statusCode >= 200 && statusCode <= limitStatusCode) || statusCode === 304;\n        if (options.throwHttpErrors && !isOk) {\n            // Normally we would have to use `void [await] this._beforeError(error)` everywhere,\n            // but since there's `void (async () => { ... })()` inside of it, we don't have to.\n            this._beforeError(new HTTPError(typedResponse));\n            // This is equivalent to this.destroyed\n            if (this[kStopReading]) {\n                return;\n            }\n        }\n        response.on('readable', () => {\n            if (this[kTriggerRead]) {\n                this._read();\n            }\n        });\n        this.on('resume', () => {\n            response.resume();\n        });\n        this.on('pause', () => {\n            response.pause();\n        });\n        response.once('end', () => {\n            this.push(null);\n        });\n        this.emit('response', response);\n        for (const destination of this[kServerResponsesPiped]) {\n            if (destination.headersSent) {\n                continue;\n            }\n            // eslint-disable-next-line guard-for-in\n            for (const key in response.headers) {\n                const isAllowed = options.decompress ? key !== 'content-encoding' : true;\n                const value = response.headers[key];\n                if (isAllowed) {\n                    destination.setHeader(key, value);\n                }\n            }\n            destination.statusCode = statusCode;\n        }\n    }\n    async _onResponse(response) {\n        try {\n            await this._onResponseBase(response);\n        }\n        catch (error) {\n            this._beforeError(error);\n        }\n    }\n    _onRequest(request) {\n        const { options } = this;\n        const { timeout, url } = options;\n        http_timer_1.default(request);\n        this[kCancelTimeouts] = timed_out_1.default(request, timeout, url);\n        const responseEventName = options.cache ? 'cacheableResponse' : 'response';\n        request.once(responseEventName, (response) => {\n            void this._onResponse(response);\n        });\n        request.once('error', (error) => {\n            var _a;\n            // Force clean-up, because some packages (e.g. nock) don't do this.\n            request.destroy();\n            // Node.js <= 12.18.2 mistakenly emits the response `end` first.\n            (_a = request.res) === null || _a === void 0 ? void 0 : _a.removeAllListeners('end');\n            if (error instanceof timed_out_1.TimeoutError) {\n                error = new TimeoutError(error, this.timings, this);\n            }\n            else {\n                error = new RequestError(error.message, error, this);\n            }\n            this._beforeError(error);\n        });\n        this[kUnproxyEvents] = proxy_events_1.default(request, this, proxiedRequestEvents);\n        this[kRequest] = request;\n        this.emit('uploadProgress', this.uploadProgress);\n        // Send body\n        const body = this[kBody];\n        const currentRequest = this.redirects.length === 0 ? this : request;\n        if (is_1.default.nodeStream(body)) {\n            body.pipe(currentRequest);\n            body.once('error', (error) => {\n                this._beforeError(new UploadError(error, this));\n            });\n            body.once('end', () => {\n                delete options.body;\n            });\n        }\n        else {\n            this._unlockWrite();\n            if (!is_1.default.undefined(body)) {\n                this._writeRequest(body, undefined, () => { });\n                currentRequest.end();\n                this._lockWrite();\n            }\n            else if (this._cannotHaveBody || this._noPipe) {\n                currentRequest.end();\n                this._lockWrite();\n            }\n        }\n        this.emit('request', request);\n    }\n    async _createCacheableRequest(url, options) {\n        return new Promise((resolve, reject) => {\n            // TODO: Remove `utils/url-to-options.ts` when `cacheable-request` is fixed\n            Object.assign(options, url_to_options_1.default(url));\n            // `http-cache-semantics` checks this\n            delete options.url;\n            let request;\n            // This is ugly\n            const cacheRequest = cacheableStore.get(options.cache)(options, async (response) => {\n                // TODO: Fix `cacheable-response`\n                response._readableState.autoDestroy = false;\n                if (request) {\n                    (await request).emit('cacheableResponse', response);\n                }\n                resolve(response);\n            });\n            // Restore options\n            options.url = url;\n            cacheRequest.once('error', reject);\n            cacheRequest.once('request', async (requestOrPromise) => {\n                request = requestOrPromise;\n                resolve(request);\n            });\n        });\n    }\n    async _makeRequest() {\n        var _a;\n        const { options } = this;\n        const { headers } = options;\n        for (const key in headers) {\n            if (is_1.default.undefined(headers[key])) {\n                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n                delete headers[key];\n            }\n            else if (is_1.default.null_(headers[key])) {\n                throw new TypeError(`Use \\`undefined\\` instead of \\`null\\` to delete the \\`${key}\\` header`);\n            }\n        }\n        if (options.decompress && is_1.default.undefined(headers['accept-encoding'])) {\n            headers['accept-encoding'] = supportsBrotli ? 'gzip, deflate, br' : 'gzip, deflate';\n        }\n        // Set cookies\n        if (options.cookieJar) {\n            const cookieString = await options.cookieJar.getCookieString(options.url.toString());\n            if (is_1.default.nonEmptyString(cookieString)) {\n                options.headers.cookie = cookieString;\n            }\n        }\n        for (const hook of options.hooks.beforeRequest) {\n            // eslint-disable-next-line no-await-in-loop\n            const result = await hook(options);\n            if (!is_1.default.undefined(result)) {\n                // @ts-expect-error Skip the type mismatch to support abstract responses\n                options.request = () => result;\n                break;\n            }\n        }\n        const { agent, request, timeout, url } = options;\n        if (options.dnsCache && !('lookup' in options)) {\n            options.lookup = options.dnsCache.lookup;\n        }\n        // UNIX sockets\n        if (url.hostname === 'unix') {\n            const matches = /(?<socketPath>.+?):(?<path>.+)/.exec(`${url.pathname}${url.search}`);\n            if (matches === null || matches === void 0 ? void 0 : matches.groups) {\n                const { socketPath, path } = matches.groups;\n                Object.assign(options, {\n                    socketPath,\n                    path,\n                    host: ''\n                });\n            }\n        }\n        const isHttps = url.protocol === 'https:';\n        // Fallback function\n        let fallbackFn;\n        if (options.http2) {\n            fallbackFn = http2wrapper.auto;\n        }\n        else {\n            fallbackFn = isHttps ? https.request : http.request;\n        }\n        const realFn = (_a = options.request) !== null && _a !== void 0 ? _a : fallbackFn;\n        // Cache support\n        const fn = options.cache ? this._createCacheableRequest : realFn;\n        // Pass an agent directly when HTTP2 is disabled\n        if (agent && !options.http2) {\n            options.agent = agent[isHttps ? 'https' : 'http'];\n        }\n        // Prepare plain HTTP request options\n        options[kRequest] = realFn;\n        delete options.request;\n        delete options.timeout;\n        const requestOptions = options;\n        // If `dnsLookupIpVersion` is not present do not override `family`\n        if (options.dnsLookupIpVersion !== undefined) {\n            try {\n                requestOptions.family = dns_ip_version_1.dnsLookupIpVersionToFamily(options.dnsLookupIpVersion);\n            }\n            catch (_b) {\n                throw new Error('Invalid `dnsLookupIpVersion` option value');\n            }\n        }\n        // HTTPS options remapping\n        if (options.https) {\n            if ('rejectUnauthorized' in options.https) {\n                requestOptions.rejectUnauthorized = options.https.rejectUnauthorized;\n            }\n            if (options.https.checkServerIdentity) {\n                requestOptions.checkServerIdentity = options.https.checkServerIdentity;\n            }\n            if (options.https.certificateAuthority) {\n                requestOptions.ca = options.https.certificateAuthority;\n            }\n            if (options.https.certificate) {\n                requestOptions.cert = options.https.certificate;\n            }\n            if (options.https.key) {\n                requestOptions.key = options.https.key;\n            }\n            if (options.https.passphrase) {\n                requestOptions.passphrase = options.https.passphrase;\n            }\n        }\n        try {\n            let requestOrResponse = await fn(url, requestOptions);\n            if (is_1.default.undefined(requestOrResponse)) {\n                requestOrResponse = fallbackFn(url, requestOptions);\n            }\n            // Restore options\n            options.request = request;\n            options.timeout = timeout;\n            options.agent = agent;\n            if (isClientRequest(requestOrResponse)) {\n                this._onRequest(requestOrResponse);\n                // Emit the response after the stream has been ended\n            }\n            else if (this.writable) {\n                this.once('finish', () => {\n                    void this._onResponse(requestOrResponse);\n                });\n                this._unlockWrite();\n                this.end();\n                this._lockWrite();\n            }\n            else {\n                void this._onResponse(requestOrResponse);\n            }\n        }\n        catch (error) {\n            if (error instanceof CacheableRequest.CacheError) {\n                throw new CacheError(error, this);\n            }\n            throw new RequestError(error.message, error, this);\n        }\n    }\n    _beforeError(error) {\n        if (this.destroyed) {\n            return;\n        }\n        this[kStopReading] = true;\n        if (!(error instanceof RequestError)) {\n            error = new RequestError(error.message, error, this);\n        }\n        void (async () => {\n            try {\n                const { response } = error;\n                if (response) {\n                    response.setEncoding(this._readableState.encoding);\n                    response.rawBody = await get_buffer_1.default(response);\n                    response.body = response.rawBody.toString();\n                }\n            }\n            catch (_a) { }\n            try {\n                for (const hook of this.options.hooks.beforeError) {\n                    // eslint-disable-next-line no-await-in-loop\n                    error = await hook(error);\n                }\n            }\n            catch (error_) {\n                error = new RequestError(error_.message, error_, this);\n            }\n            this.destroy(error);\n        })();\n    }\n    _read() {\n        this[kTriggerRead] = true;\n        const response = this[kResponse];\n        if (response && !this[kStopReading]) {\n            // We cannot put this in the `if` above\n            // because `.read()` also triggers the `end` event\n            if (response.readableLength) {\n                this[kTriggerRead] = false;\n            }\n            let data;\n            while ((data = response.read()) !== null) {\n                this[kDownloadedSize] += data.length;\n                this[kStartedReading] = true;\n                const progress = this.downloadProgress;\n                if (progress.percent < 1) {\n                    this.emit('downloadProgress', progress);\n                }\n                this.push(data);\n            }\n        }\n    }\n    // Node.js 12 has incorrect types, so the encoding must be a string\n    _write(chunk, encoding, callback) {\n        const write = () => {\n            this._writeRequest(chunk, encoding, callback);\n        };\n        if (this.requestInitialized) {\n            write();\n        }\n        else {\n            this[kJobs].push(write);\n        }\n    }\n    _writeRequest(chunk, encoding, callback) {\n        this._progressCallbacks.push(() => {\n            this[kUploadedSize] += Buffer.byteLength(chunk, encoding);\n            const progress = this.uploadProgress;\n            if (progress.percent < 1) {\n                this.emit('uploadProgress', progress);\n            }\n        });\n        // TODO: What happens if it's from cache? Then this[kRequest] won't be defined.\n        this[kRequest].write(chunk, encoding, (error) => {\n            if (!error && this._progressCallbacks.length !== 0) {\n                this._progressCallbacks.shift()();\n            }\n            callback(error);\n        });\n    }\n    _final(callback) {\n        const endRequest = () => {\n            // FIX: Node.js 10 calls the write callback AFTER the end callback!\n            while (this._progressCallbacks.length !== 0) {\n                this._progressCallbacks.shift()();\n            }\n            // We need to check if `this[kRequest]` is present,\n            // because it isn't when we use cache.\n            if (!(kRequest in this)) {\n                callback();\n                return;\n            }\n            if (this[kRequest].destroyed) {\n                callback();\n                return;\n            }\n            this[kRequest].end((error) => {\n                if (!error) {\n                    this[kBodySize] = this[kUploadedSize];\n                    this.emit('uploadProgress', this.uploadProgress);\n                    this[kRequest].emit('upload-complete');\n                }\n                callback(error);\n            });\n        };\n        if (this.requestInitialized) {\n            endRequest();\n        }\n        else {\n            this[kJobs].push(endRequest);\n        }\n    }\n    _destroy(error, callback) {\n        var _a;\n        this[kStopReading] = true;\n        if (kRequest in this) {\n            this[kCancelTimeouts]();\n            // TODO: Remove the next `if` when these get fixed:\n            // - https://github.com/nodejs/node/issues/32851\n            if (!((_a = this[kResponse]) === null || _a === void 0 ? void 0 : _a.complete)) {\n                this[kRequest].destroy();\n            }\n        }\n        if (error !== null && !is_1.default.undefined(error) && !(error instanceof RequestError)) {\n            error = new RequestError(error.message, error, this);\n        }\n        callback(error);\n    }\n    get ip() {\n        var _a;\n        return (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.socket.remoteAddress;\n    }\n    get aborted() {\n        var _a, _b, _c;\n        return ((_b = (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.destroyed) !== null && _b !== void 0 ? _b : this.destroyed) && !((_c = this[kOriginalResponse]) === null || _c === void 0 ? void 0 : _c.complete);\n    }\n    get socket() {\n        var _a;\n        return (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.socket;\n    }\n    get downloadProgress() {\n        let percent;\n        if (this[kResponseSize]) {\n            percent = this[kDownloadedSize] / this[kResponseSize];\n        }\n        else if (this[kResponseSize] === this[kDownloadedSize]) {\n            percent = 1;\n        }\n        else {\n            percent = 0;\n        }\n        return {\n            percent,\n            transferred: this[kDownloadedSize],\n            total: this[kResponseSize]\n        };\n    }\n    get uploadProgress() {\n        let percent;\n        if (this[kBodySize]) {\n            percent = this[kUploadedSize] / this[kBodySize];\n        }\n        else if (this[kBodySize] === this[kUploadedSize]) {\n            percent = 1;\n        }\n        else {\n            percent = 0;\n        }\n        return {\n            percent,\n            transferred: this[kUploadedSize],\n            total: this[kBodySize]\n        };\n    }\n    get timings() {\n        var _a;\n        return (_a = this[kRequest]) === null || _a === void 0 ? void 0 : _a.timings;\n    }\n    get isFromCache() {\n        return this[kIsFromCache];\n    }\n    get _response() {\n        return this[kResponse];\n    }\n    pipe(destination, options) {\n        if (this[kStartedReading]) {\n            throw new Error('Failed to pipe. The response has been emitted already.');\n        }\n        if (destination instanceof http_1.ServerResponse) {\n            this[kServerResponsesPiped].add(destination);\n        }\n        return super.pipe(destination, options);\n    }\n    unpipe(destination) {\n        if (destination instanceof http_1.ServerResponse) {\n            this[kServerResponsesPiped].delete(destination);\n        }\n        super.unpipe(destination);\n        return this;\n    }\n}\nexports.default = Request;\n"]},"metadata":{},"sourceType":"script"}