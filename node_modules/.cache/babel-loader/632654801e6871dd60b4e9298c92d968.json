{"ast":null,"code":"const request = require('request-promise');\n\nconst moment = require('moment');\n\nmodule.exports = async (bearer, options) => {\n  const {\n    amount,\n    variantID,\n    askID,\n    currency,\n    cookieJar,\n    proxy,\n    userAgent\n  } = options;\n  const expiresAt = moment().add(30, 'days').utc().format();\n  const res = await request({\n    uri: 'https://stockx.com/api/portfolio?a=ask',\n    method: 'POST',\n    headers: {\n      'Host': 'stockx.com',\n      'sec-fetch-mode': 'cors',\n      'origin': 'https://stockx.com',\n      'authorization': `Bearer ${bearer}`,\n      'content-type': 'application/json',\n      'appos': 'web',\n      'x-requested-with': 'XMLHttpRequest',\n      'user-agent': userAgent,\n      'appversion': '0.1',\n      'accept': '*/*',\n      'sec-fetch-site': 'same-origin',\n      'accept-language': 'en-US,en;q=0.9'\n    },\n    json: {\n      PortfolioItem: {\n        localAmount: amount,\n        skuUuid: variantID,\n        localCurrency: currency,\n        expiresAt: expiresAt,\n        chainId: askID\n      }\n    },\n    jar: cookieJar,\n    simple: false,\n    resolveWithFullResponse: true,\n    proxy: proxy\n  });\n\n  if (res.statusCode !== 200) {\n    const e = new Error(`Status code error: ${res.statusCode}`);\n    e.statusCode = res.statusCode;\n    e.body = res.body;\n    throw e;\n  }\n\n  ;\n  return {\n    id: res.body.PortfolioItem.chainId,\n    response: res.body\n  };\n};","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/stockx-api/src/api/updateask/updateask.js"],"names":["request","require","moment","module","exports","bearer","options","amount","variantID","askID","currency","cookieJar","proxy","userAgent","expiresAt","add","utc","format","res","uri","method","headers","json","PortfolioItem","localAmount","skuUuid","localCurrency","chainId","jar","simple","resolveWithFullResponse","statusCode","e","Error","body","id","response"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,iBAAD,CAAvB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AAEAE,MAAM,CAACC,OAAP,GAAiB,OAAOC,MAAP,EAAeC,OAAf,KAA2B;AACxC,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,SAAV;AAAqBC,IAAAA,KAArB;AAA4BC,IAAAA,QAA5B;AAAsCC,IAAAA,SAAtC;AAAiDC,IAAAA,KAAjD;AAAwDC,IAAAA;AAAxD,MAAuEP,OAA7E;AAEA,QAAMQ,SAAS,GAAGZ,MAAM,GAAGa,GAAT,CAAa,EAAb,EAAiB,MAAjB,EAAyBC,GAAzB,GAA+BC,MAA/B,EAAlB;AACA,QAAMC,GAAG,GAAG,MAAMlB,OAAO,CAAC;AACtBmB,IAAAA,GAAG,EAAE,wCADiB;AAEtBC,IAAAA,MAAM,EAAE,MAFc;AAGtBC,IAAAA,OAAO,EAAE;AACL,cAAQ,YADH;AAEL,wBAAkB,MAFb;AAGL,gBAAU,oBAHL;AAIL,uBAAkB,UAAShB,MAAO,EAJ7B;AAKL,sBAAgB,kBALX;AAML,eAAS,KANJ;AAOL,0BAAoB,gBAPf;AAQL,oBAAcQ,SART;AASL,oBAAc,KATT;AAUL,gBAAU,KAVL;AAWL,wBAAkB,aAXb;AAYL,yBAAmB;AAZd,KAHa;AAiBtBS,IAAAA,IAAI,EAAE;AACFC,MAAAA,aAAa,EAAE;AACXC,QAAAA,WAAW,EAAEjB,MADF;AAEXkB,QAAAA,OAAO,EAAEjB,SAFE;AAGXkB,QAAAA,aAAa,EAAEhB,QAHJ;AAIXI,QAAAA,SAAS,EAAEA,SAJA;AAKXa,QAAAA,OAAO,EAAElB;AALE;AADb,KAjBgB;AA0BtBmB,IAAAA,GAAG,EAAEjB,SA1BiB;AA2BtBkB,IAAAA,MAAM,EAAE,KA3Bc;AA4BtBC,IAAAA,uBAAuB,EAAE,IA5BH;AA6BtBlB,IAAAA,KAAK,EAAEA;AA7Be,GAAD,CAAzB;;AAgCA,MAAIM,GAAG,CAACa,UAAJ,KAAmB,GAAvB,EAA2B;AACvB,UAAMC,CAAC,GAAG,IAAIC,KAAJ,CAAW,sBAAqBf,GAAG,CAACa,UAAW,EAA/C,CAAV;AACAC,IAAAA,CAAC,CAACD,UAAF,GAAeb,GAAG,CAACa,UAAnB;AACAC,IAAAA,CAAC,CAACE,IAAF,GAAShB,GAAG,CAACgB,IAAb;AAEA,UAAMF,CAAN;AACH;;AAAA;AAED,SAAO;AACHG,IAAAA,EAAE,EAAEjB,GAAG,CAACgB,IAAJ,CAASX,aAAT,CAAuBI,OADxB;AAEHS,IAAAA,QAAQ,EAAElB,GAAG,CAACgB;AAFX,GAAP;AAIH,CAhDD","sourcesContent":["const request = require('request-promise');\nconst moment = require('moment');\n\nmodule.exports = async (bearer, options) => {\n    const { amount, variantID, askID, currency, cookieJar, proxy, userAgent }  = options;\n\n    const expiresAt = moment().add(30, 'days').utc().format();\n    const res = await request({\n        uri: 'https://stockx.com/api/portfolio?a=ask',\n        method: 'POST',\n        headers: {\n            'Host': 'stockx.com',\n            'sec-fetch-mode': 'cors',\n            'origin': 'https://stockx.com',\n            'authorization': `Bearer ${bearer}`,\n            'content-type': 'application/json',\n            'appos': 'web',\n            'x-requested-with': 'XMLHttpRequest',\n            'user-agent': userAgent,\n            'appversion': '0.1',\n            'accept': '*/*',\n            'sec-fetch-site': 'same-origin',\n            'accept-language': 'en-US,en;q=0.9',\n        },\n        json: {\n            PortfolioItem: {\n                localAmount: amount,\n                skuUuid: variantID,\n                localCurrency: currency,\n                expiresAt: expiresAt,\n                chainId: askID\n            }\n        },\n        jar: cookieJar,\n        simple: false,\n        resolveWithFullResponse: true,\n        proxy: proxy\n    });\n\n    if (res.statusCode !== 200){\n        const e = new Error(`Status code error: ${res.statusCode}`);\n        e.statusCode = res.statusCode;\n        e.body = res.body;\n\n        throw e;\n    };\n\n    return {\n        id: res.body.PortfolioItem.chainId,\n        response: res.body\n    };\n};"]},"metadata":{},"sourceType":"script"}