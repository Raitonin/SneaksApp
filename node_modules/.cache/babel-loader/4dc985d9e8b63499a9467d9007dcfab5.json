{"ast":null,"code":"const got = require('got');\n\nmodule.exports = async (query, options = {}) => {\n  const {\n    limit,\n    proxy,\n    userAgent\n  } = options;\n  const res = await got(`https://stockx.com/api/browse?_search=${query}`, {\n    headers: {\n      'user-agent': userAgent,\n      'sec-fetch-dest': 'none',\n      'accept': '*/*',\n      'sec-fetch-site': 'cross-site',\n      'sec-fetch-mode': 'cors',\n      'accept-language': 'en-US'\n    },\n    responseType: 'json',\n    http2: true\n  });\n  const {\n    body\n  } = res;\n  const {\n    Products\n  } = body;\n  const target = limit !== undefined ? Products.slice(0, limit) : Products;\n  const productArray = target.map(product => {\n    const image = new URL(product.media.imageUrl, 'https://stockx.com').href;\n    return {\n      name: product.title,\n      retail: product.retailPrice,\n      releaseDate: product.releaseDate,\n      pid: product.styleId,\n      uuid: product.market.productUuid,\n      image,\n      urlKey: product.urlKey,\n      market: product.market\n    };\n  });\n  if (productArray == \"\") throw new Error(\"No products found!\");else return productArray;\n};","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/stockx-api/src/api/scrapers/searchproducts.js"],"names":["got","require","module","exports","query","options","limit","proxy","userAgent","res","headers","responseType","http2","body","Products","target","undefined","slice","productArray","map","product","image","URL","media","imageUrl","href","name","title","retail","retailPrice","releaseDate","pid","styleId","uuid","market","productUuid","urlKey","Error"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAnB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,OAAOC,KAAP,EAAcC,OAAO,GAAG,EAAxB,KAA+B;AAC5C,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,KAAT;AAAgBC,IAAAA;AAAhB,MAA8BH,OAApC;AAEA,QAAMI,GAAG,GAAG,MAAMT,GAAG,CAAE,yCAAwCI,KAAM,EAAhD,EAAmD;AACpEM,IAAAA,OAAO,EAAE;AACL,oBAAcF,SADT;AAEL,wBAAkB,MAFb;AAGL,gBAAU,KAHL;AAIL,wBAAkB,YAJb;AAKL,wBAAkB,MALb;AAML,yBAAmB;AANd,KAD2D;AASpEG,IAAAA,YAAY,EAAE,MATsD;AAUpEC,IAAAA,KAAK,EAAE;AAV6D,GAAnD,CAArB;AAaA,QAAM;AAAEC,IAAAA;AAAF,MAAWJ,GAAjB;AAEA,QAAM;AAAEK,IAAAA;AAAF,MAAeD,IAArB;AACA,QAAME,MAAM,GAAGT,KAAK,KAAKU,SAAV,GAAsBF,QAAQ,CAACG,KAAT,CAAe,CAAf,EAAkBX,KAAlB,CAAtB,GAAiDQ,QAAhE;AACA,QAAMI,YAAY,GAAGH,MAAM,CAACI,GAAP,CAAWC,OAAO,IAAI;AACvC,UAAMC,KAAK,GAAG,IAAIC,GAAJ,CAAQF,OAAO,CAACG,KAAR,CAAcC,QAAtB,EAAgC,oBAAhC,EAAsDC,IAApE;AAEA,WAAO;AACHC,MAAAA,IAAI,EAAEN,OAAO,CAACO,KADX;AAEHC,MAAAA,MAAM,EAAER,OAAO,CAACS,WAFb;AAGHC,MAAAA,WAAW,EAAEV,OAAO,CAACU,WAHlB;AAIHC,MAAAA,GAAG,EAAEX,OAAO,CAACY,OAJV;AAKHC,MAAAA,IAAI,EAAEb,OAAO,CAACc,MAAR,CAAeC,WALlB;AAMHd,MAAAA,KANG;AAOHe,MAAAA,MAAM,EAAEhB,OAAO,CAACgB,MAPb;AAQHF,MAAAA,MAAM,EAAEd,OAAO,CAACc;AARb,KAAP;AAUH,GAboB,CAArB;AAeA,MAAIhB,YAAY,IAAI,EAApB,EAAwB,MAAM,IAAImB,KAAJ,CAAU,oBAAV,CAAN,CAAxB,KACK,OAAOnB,YAAP;AACR,CArCD","sourcesContent":["const got = require('got');\n\nmodule.exports = async (query, options = {}) => {\n    const { limit, proxy, userAgent } = options;\n\n    const res = await got(`https://stockx.com/api/browse?_search=${query}`, {\n        headers: {\n            'user-agent': userAgent,\n            'sec-fetch-dest': 'none',\n            'accept': '*/*',\n            'sec-fetch-site': 'cross-site',\n            'sec-fetch-mode': 'cors',\n            'accept-language': 'en-US'\n        },\n        responseType: 'json',\n        http2: true\n    });\n\n    const { body } = res;\n\n    const { Products } = body;\n    const target = limit !== undefined ? Products.slice(0, limit) : Products;\n    const productArray = target.map(product => {\n        const image = new URL(product.media.imageUrl, 'https://stockx.com').href;\n\n        return {\n            name: product.title,\n            retail: product.retailPrice,\n            releaseDate: product.releaseDate,\n            pid: product.styleId,\n            uuid: product.market.productUuid,\n            image,\n            urlKey: product.urlKey,\n            market: product.market\n        };\n    });\n\n    if (productArray == \"\") throw new Error(\"No products found!\");\n    else return productArray;\n};"]},"metadata":{},"sourceType":"script"}